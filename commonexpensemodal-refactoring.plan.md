# Î‘Î½Î±Î´Î¹Î¬ÏÎ¸ÏÏ‰ÏƒÎ· "Î¦ÏÎ»Î»Î¿ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½" (CommonExpenseModal)

## ğŸ¯ ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒÏ‚ Î£Ï„ÏŒÏ‡Î¿Ï‚

Î‘Î½Î±Î´Î¹Î¬ÏÎ¸ÏÏ‰ÏƒÎ· Ï„Î¿Ï… "Î¦ÏÎ»Î»Î¿ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½" Calculator Î³Î¹Î± Î½Î± ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ ÏƒÏ‰ÏƒÏ„Î¬ Ï„Î¿Î½ Î´Î¹Î±Ï‡Ï‰ÏÎ¹ÏƒÎ¼ÏŒ Ï‡ÏÎµÏÏƒÎµÏ‰Î½ Î¹Î´Î¹Î¿ÎºÏ„Î®Ï„Î·/ÎµÎ½Î¿Î¯ÎºÎ¿Ï… ÎºÎ±Î¹ Î½Î± Î­Ï‡ÎµÎ¹ ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¹ÎºÏŒ header ÎµÎºÏ„ÏÏ€Ï‰ÏƒÎ·Ï‚, ÏŒÏ€Ï‰Ï‚ Ï„Î¿ PaymentNotificationModal.

---

## ğŸ“‹ Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·

- ÎŸ Ï€Î¯Î½Î±ÎºÎ±Ï‚ Î­Ï‡ÎµÎ¹ Î®Î´Î· ÏƒÏ„Î®Î»Î· "Î”Î‘Î Î‘ÎÎ•Î£ Î™Î”Î™ÎŸÎšÎ¤Î—Î¤Î©Î" Î±Î»Î»Î¬ ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ Î¼ÏŒÎ½Î¿ "-"
- Î¤Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î´ÎµÎ½ Î´Î¹Î±Ï‡Ï‰ÏÎ¯Î¶Î¿Ï…Î½ Ï„Î¹Ï‚ Î´Î±Ï€Î¬Î½ÎµÏ‚ Î±Î½Î¬ `payer_responsibility`
- Î¤Î¿ header Î³Î¹Î± ÎµÎºÏ„ÏÏ€Ï‰ÏƒÎ· Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î±Î¹ÏƒÎ¸Î·Ï„Î¹ÎºÎ® Î±Î½Î±Î²Î¬Î¸Î¼Î¹ÏƒÎ·

---

## ğŸ—ºï¸ Î£Ï‡Î­Î´Î¹Î¿ Î‘Î½Î±Î´Î¹Î¬ÏÎ¸ÏÏ‰ÏƒÎ·Ï‚

### **Î¦Î¬ÏƒÎ· 1: Backend - Î•Î¼Ï€Î»Î¿Ï…Ï„Î¹ÏƒÎ¼ÏŒÏ‚ Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½**

**Î£Ï„ÏŒÏ‡Î¿Ï‚:** Î•Î¾Î±ÏƒÏ†Î¬Î»Î¹ÏƒÎ· ÏŒÏ„Î¹ Ï„Î¿ backend ÏƒÏ„Î­Î»Î½ÎµÎ¹ `payer_responsibility` Î³Î¹Î± ÎºÎ¬Î¸Îµ Î´Î±Ï€Î¬Î½Î·

**Î‘ÏÏ‡ÎµÎ¯Î±:**
- `linux_version/backend/financial/views.py` (endpoint: `apartment_obligations`)
- Î® Ï‡ÏÎ®ÏƒÎ· Ï„Î¿Ï… Î®Î´Î· ÎµÎ½Î·Î¼ÎµÏÏ‰Î¼Î­Î½Î¿Ï… `apartment_balances` endpoint

**Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚:**
1. Î•Ï€Î±Î»Î®Î¸ÎµÏ…ÏƒÎ· ÏŒÏ„Î¹ Ï„Î¿ `expense_breakdown` Ï€Î¿Ï… ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÏ„Î±Î¹ Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ `payer_responsibility`
2. Î‘Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹, ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï„Î¿Ï… endpoint Î³Î¹Î± Î½Î± Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ Î±Ï…Ï„ÏŒ Ï„Î¿ Ï€ÎµÎ´Î¯Î¿

---

### **Î¦Î¬ÏƒÎ· 2: Frontend Types - Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Interfaces**

**Î‘ÏÏ‡ÎµÎ¯Î±:**
- `linux_version/frontend/components/financial/calculator/types/financial.ts`
- `linux_version/frontend/hooks/useMonthlyExpenses.ts`

**Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚:**
1. Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· `ExpenseBreakdownItem` interface:
   ```typescript
   interface ExpenseBreakdownItem {
     category: string;
     category_display: string;
     amount: number;
     payer_responsibility: 'owner' | 'resident' | 'shared';  // ÎÎ•ÎŸ
   }
   ```

---

### **Î¦Î¬ÏƒÎ· 3: Î Î¯Î½Î±ÎºÎ±Ï‚ - Î£Ï‰ÏƒÏ„Î® ÎšÎ±Ï„Î±Î½Î¿Î¼Î® Î”Î±Ï€Î±Î½ÏÎ½**

**Î‘ÏÏ‡ÎµÎ¯Î¿:** `linux_version/frontend/components/financial/calculator/components/ApartmentExpenseTable.tsx`

**Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· (Î³ÏÎ±Î¼Î¼Î® 90):**
```typescript
{showOwnerExpenses && (<><TableCell>-</TableCell><TableCell>-</TableCell><TableCell>-</TableCell></>)}
```

**ÎÎ­Î± Î›Î¿Î³Î¹ÎºÎ®:**
1. Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î´Î±Ï€Î±Î½ÏÎ½ Î±Î½Î¬ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î± Î¼Îµ Î²Î¬ÏƒÎ· `payer_responsibility`
2. ÎšÎ±Ï„Î±Î½Î¿Î¼Î® ÏƒÎµ:
   - **Î”Î±Ï€Î¬Î½ÎµÏ‚ Î•Î½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„ÏÎ½:** `payer_responsibility === 'resident'` Î® `'shared'`
   - **Î”Î±Ï€Î¬Î½ÎµÏ‚ Î™Î´Î¹Î¿ÎºÏ„Î·Ï„ÏÎ½:** `payer_responsibility === 'owner'`

**Î£Ï„Î®Î»ÎµÏ‚ Î”Î±Ï€Î±Î½ÏÎ½ Î•Î½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„ÏÎ½:**
- ÎšÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Î± (resident expenses)
- Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±Ï‚ (resident expenses)
- Î˜Î­ÏÎ¼Î±Î½ÏƒÎ· (resident expenses)  
- ÎšÏŒÏƒÏ„Î¿Ï‚ Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ (resident expenses)

**Î£Ï„Î®Î»ÎµÏ‚ Î”Î±Ï€Î±Î½ÏÎ½ Î™Î´Î¹Î¿ÎºÏ„Î·Ï„ÏÎ½:**
- ÎšÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Î± Î™Î´Î¹Î¿ÎºÏ„Î®Ï„Î· (owner expenses)
- Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±Ï‚ Î™Î´Î¹Î¿ÎºÏ„Î®Ï„Î· (owner expenses)
- Î˜Î­ÏÎ¼Î±Î½ÏƒÎ· Î™Î´Î¹Î¿ÎºÏ„Î®Ï„Î· (owner expenses)

---

### **Î¦Î¬ÏƒÎ· 4: Header - Î‘Î¹ÏƒÎ¸Î·Ï„Î¹ÎºÎ® Î‘Î½Î±Î²Î¬Î¸Î¼Î¹ÏƒÎ·**

**Î‘ÏÏ‡ÎµÎ¯Î±:**
- `linux_version/frontend/components/financial/calculator/utils/pdfGenerator.ts`
- `linux_version/frontend/components/financial/calculator/utils/jpgGenerator.ts`
- `linux_version/frontend/components/financial/calculator/ResultsStep.tsx`

**ÎÎ­Î¿ Header Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¢ Logo + Î“ÏÎ±Ï†ÎµÎ¯Î¿  â”‚  Î¦Î¥Î›Î›ÎŸ ÎšÎŸÎ™ÎÎŸÎ§Î¡Î—Î£Î¤Î©Î  â”‚  Î Î»Î·ÏÏ‰Ï„Î­Î¿ Î­Ï‰Ï‚: â”‚
â”‚    + Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±      â”‚    ÎŸÎºÏ„ÏÎ²ÏÎ¹Î¿Ï‚ 2025     â”‚   10/11/2025   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Styling:**
- ÎŸÏÎ¹Î¶ÏŒÎ½Ï„Î¹Î± Î´Î¹Î¬Ï„Î±Î¾Î· Î¼Îµ Flexbox
- 3 Ï„Î¼Î®Î¼Î±Ï„Î±: Î“ÏÎ±Ï†ÎµÎ¯Î¿ (Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬) | Î¤Î¯Ï„Î»Î¿Ï‚ (ÎºÎ­Î½Ï„ÏÎ¿) | Î›Î®Î¾Î· (Î´ÎµÎ¾Î¹Î¬)
- Uppercase Î³Î¹Î± Ï„Î¯Ï„Î»Î¿
- Î§ÏÏ‰Î¼Î±Ï„Î¹ÎºÎ® ÎºÏ‰Î´Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·

---

### **Î¦Î¬ÏƒÎ· 5: TraditionalViewTab - Î‘Î½Î±Î²Î¬Î¸Î¼Î¹ÏƒÎ· UI**

**Î‘ÏÏ‡ÎµÎ¯Î¿:** `linux_version/frontend/components/financial/calculator/tabs/TraditionalViewTab.tsx`

**Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚:**
1. Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï„Ï‰Î½ info cards Î¼Îµ Î½Î­Î¿ styling (ÏŒÏ€Ï‰Ï‚ ÏƒÏ„Î¿ PaymentNotificationModal)
2. Î Î¹Î¸Î±Î½Î® Î±Ï†Î±Î¯ÏÎµÏƒÎ· Ï€ÎµÏÎ¹Ï„Ï„ÏÎ½ ÎµÎ½Î¿Ï„Î®Ï„Ï‰Î½ (Î±Î½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½)
3. ÎšÎ±Î»ÏÏ„ÎµÏÎ· Î´Î¹Î¬Ï„Î±Î¾Î· Î³Î¹Î± ÎµÎºÏ„ÏÏ€Ï‰ÏƒÎ·

---

## ğŸ“Š ÎšÏÎ¹Ï„Î®ÏÎ¹Î± ÎŸÎ»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ·Ï‚

âœ… Î¤Î¿ backend ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ `payer_responsibility` Î³Î¹Î± ÎºÎ¬Î¸Îµ Î´Î±Ï€Î¬Î½Î·  
âœ… ÎŸÎ¹ ÏƒÏ„Î®Î»ÎµÏ‚ "Î”Î±Ï€Î¬Î½ÎµÏ‚ Î™Î´Î¹Î¿ÎºÏ„Î·Ï„ÏÎ½" ÎµÎ¼Ï†Î±Î½Î¯Î¶Î¿Ï…Î½ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ¬ Ï€Î¿ÏƒÎ¬  
âœ… ÎŸ Î´Î¹Î±Ï‡Ï‰ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎµÎ½Î¿Î¯ÎºÎ¿Ï…/Î¹Î´Î¹Î¿ÎºÏ„Î®Ï„Î· ÎµÎ¯Î½Î±Î¹ ÏƒÏ‰ÏƒÏ„ÏŒÏ‚  
âœ… Î¤Î¿ header ÎµÎ¯Î½Î±Î¹ ÏƒÎµ Î¿ÏÎ¹Î¶ÏŒÎ½Ï„Î¹Î± Î´Î¹Î¬Ï„Î±Î¾Î·  
âœ… Î— ÎµÎºÏ„ÏÏ€Ï‰ÏƒÎ· ÎµÎ¯Î½Î±Î¹ ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¹ÎºÎ®  
âœ… Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ linter errors  

---

## ğŸ”§ Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ·

### To-dos

- [x] Backend: Î•Ï€Î±Î»Î®Î¸ÎµÏ…ÏƒÎ·/Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· endpoint Î³Î¹Î± payer_responsibility (commit: 0a8f23b7)
- [x] Frontend: Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· types (ExpenseBreakdownItem) (commit: 0a8f23b7)
- [ ] ApartmentExpenseTable: Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î»Î¿Î³Î¹ÎºÎ®Ï‚ Î´Î¹Î±Ï‡Ï‰ÏÎ¹ÏƒÎ¼Î¿Ï Î´Î±Ï€Î±Î½ÏÎ½ (ÏƒÎµ ÎµÎ¾Î­Î»Î¹Î¾Î·)
- [ ] PDF/JPG Generator: ÎÎ­Î¿ header layout
- [ ] ResultsStep: ÎÎ­Î¿ header layout Î³Î¹Î± screen view
- [ ] Testing: Î•Ï€Î±Î»Î®Î¸ÎµÏ…ÏƒÎ· Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏÎ½ ÎºÎ±Î¹ ÎµÎºÏ„ÏÏ€Ï‰ÏƒÎ·Ï‚

---

## âœ… ÎŸÎ»Î¿ÎºÎ»Î·ÏÏ‰Î¼Î­Î½Î± (ÎœÎ­Ï‡ÏÎ¹ Î¤ÏÏÎ±)

1. **Backend Service (services.py):**
   - âœ… Î— Î¼Î­Î¸Î¿Î´Î¿Ï‚ `get_expense_breakdown` Ï„ÏÏÎ± ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ `payer_responsibility`
   - âœ… Group by Î³Î¯Î½ÎµÏ„Î±Î¹ ÏƒÎµ category ÎšÎ‘Î™ payer_responsibility

2. **Frontend Types (useMonthlyExpenses.ts):**
   - âœ… Î¤Î¿ `ExpenseBreakdownItem` interface Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ `payer_responsibility`

## â³ Î£Îµ Î•Î¾Î­Î»Î¹Î¾Î·

3. **ApartmentExpenseTable:**
   - Î‘Ï€Î±Î¹Ï„ÎµÎ¯ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÎ­Ï‚ Î±Î»Î»Î±Î³Î­Ï‚ ÏƒÏ„Î¿ `useCommonExpenseCalculator` hook
   - Î— Î´Î¿Î¼Î® Ï„Ï‰Î½ `shares` ÎºÎ±Î¹ `aptWithFinancial` props ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»ÏÏ€Î»Î¿ÎºÎ·
   - Î§ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Ï€ÎµÏÎ±Î¹Ï„Î­ÏÏ‰ Î±Î½Î¬Î»Ï…ÏƒÎ· Î³Î¹Î± Ï„Î·Î½ Ï€Î»Î®ÏÎ· Ï…Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ·

## ğŸ“ Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚

- Î¤Î¿ backend ÎµÎ¯Î½Î±Î¹ Î­Ï„Î¿Î¹Î¼Î¿ Î½Î± ÏƒÏ„Î­Î»Î½ÎµÎ¹ `payer_responsibility`
- Î¤Î¿ frontend Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´ÎµÏ‡Ï„ÎµÎ¯ Î±Ï…Ï„Î¬ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±
- Î— Î»Î¿Î³Î¹ÎºÎ® ÎºÎ±Ï„Î±Î½Î¿Î¼Î®Ï‚ ÏƒÏ„Î¿Î½ Ï€Î¯Î½Î±ÎºÎ± Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Ï€ÎµÏÎ±Î¹Ï„Î­ÏÏ‰ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·
- Î ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±: Header upgrade Î³Î¹Î± Î¬Î¼ÎµÏƒÎ¿ Î¿Ï€Ï„Î¹ÎºÏŒ Î±Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î±

---

## ğŸ“ Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚

- Î¤Î¿ `useMonthlyExpenses` hook Î®Î´Î· Ï†Î­ÏÎ½ÎµÎ¹ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€ÏŒ Ï„Î¿ API
- Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î´Î¹Î±Ï„Î·ÏÎ·Î¸ÎµÎ¯ Î· Ï…Ï€Î¬ÏÏ‡Î¿Ï…ÏƒÎ± Î»Î¿Î³Î¹ÎºÏŒÏ„Î·Ï„Î± Ï„Ï‰Î½ Ï‡Î¹Î»Î¹Î¿ÏƒÏ„ÏÎ½ ÎºÎ±Î¹ ÎºÎ±Ï„Î±Î½Î¿Î¼ÏÎ½
- Î¤Î¿ ApartmentExpenseTable ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Ï…Ï€Î»Î¿ÎºÏŒÏ„ÎµÏÎ¿ Î±Ï€ÏŒ Ï„Î¿ PaymentNotificationModal table

