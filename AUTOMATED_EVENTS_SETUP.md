# ğŸ“… Automated Events System - Setup Guide

## Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® Î£Ï…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚

Î¤Î¿ Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± events Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ **Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± ÏƒÏ…Î¼Î²Î¬Î½Ï„Î±** Î³Î¹Î±:

### ğŸ”´ 1. ÎšÎ±Î¸Ï…ÏƒÏ„ÎµÏÎ·Î¼Î­Î½Î± ÎšÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Î± (>1 Î¼Î®Î½Î±Ï‚)
- Î•Î½Ï„Î¿Ï€Î¯Î¶ÎµÎ¹ Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î± Î¼Îµ Î¿Ï†ÎµÎ¹Î»Î­Ï‚
- Î”Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ high priority events
- Î ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ Î»ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ Î¿Ï†ÎµÎ¹Î»ÏÎ½ Î±Î½Î¬ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±
- **Î‘Ï€Î¿Ï†ÎµÏÎ³ÎµÎ¹ duplicates** - Î´ÎµÎ½ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Î½Î­Î¿ event Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î®Î´Î·

### ğŸ“‹ 2. ÎœÎ·Î½Î¹Î±Î¯Î± Î¥Ï€ÎµÎ½Î¸ÏÎ¼Î¹ÏƒÎ· ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½ (1-3 ÎºÎ¬Î¸Îµ Î¼Î®Î½Î±)  
- Î¥Ï€ÎµÎ½Î¸ÏÎ¼Î¹ÏƒÎ· Î³Î¹Î± Î­ÎºÎ´Î¿ÏƒÎ· ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿Ï… Î¼Î®Î½Î±
- Medium priority events
- Î ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ checklist Î²Î·Î¼Î¬Ï„Ï‰Î½
- Î•ÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Î¼ÏŒÎ½Î¿ Ï„Î¹Ï‚ Ï€ÏÏÏ„ÎµÏ‚ 3 Î¼Î­ÏÎµÏ‚ Ï„Î¿Ï… Î¼Î®Î½Î±

### ğŸ”§ 3. Maintenance Payment Alerts (5 Î¼Î­ÏÎµÏ‚ Ï€ÏÎ¹Î½ + ÎµÎºÏ€ÏÏŒÎ¸ÎµÏƒÎ¼Î±)
- Î•Ï€ÎµÏÏ‡ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î´ÏŒÏƒÎµÎ¹Ï‚ maintenance (5 Î¼Î­ÏÎµÏ‚ Ï€ÏÎ¹Î½)
- Î•ÎºÏ€ÏÏŒÎ¸ÎµÏƒÎ¼ÎµÏ‚ Î´ÏŒÏƒÎµÎ¹Ï‚ (urgent priority)
- Î Î»Î®ÏÎµÎ¹Ï‚ Î»ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ ÎµÏÎ³Î¿Î»Î¬Î²Î¿Ï… ÎºÎ±Î¹ Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚
- Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚

## ğŸš€ Î•Î³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· & Î§ÏÎ®ÏƒÎ·

### ÎœÎ·-Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î•ÎºÏ„Î­Î»ÎµÏƒÎ·
```bash
# Dry run (Ï€ÏÎ¿ÎµÏ€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ· Ï‡Ï‰ÏÎ¯Ï‚ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·)
./run_automated_events.sh --dry-run

# ÎšÎ±Î½Î¿Î½Î¹ÎºÎ® ÎµÎºÏ„Î­Î»ÎµÏƒÎ·
./run_automated_events.sh

# Î“Î¹Î± ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿ ÎºÏ„Î¯ÏÎ¹Î¿
./run_automated_events.sh --building 1
```

### Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î•ÎºÏ„Î­Î»ÎµÏƒÎ· Î¼Îµ Cron

#### Î•Ï€Î¹Î»Î¿Î³Î® 1: ÎšÎ±Î¸Î·Î¼ÎµÏÎ¹Î½Î® ÎµÎºÏ„Î­Î»ÎµÏƒÎ· (Î£Ï…Î½Î¹ÏƒÏ„Î¬Ï„Î±Î¹)
```bash
# Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÏ„Î¿ crontab
crontab -e

# ÎšÎ±Î¸Î·Î¼ÎµÏÎ¹Î½Î¬ ÏƒÏ„Î¹Ï‚ 9:00 Ï€Î¼
0 9 * * * /home/theo/projects/linux_version/run_automated_events.sh >> /home/theo/projects/linux_version/logs/cron.log 2>&1
```

#### Î•Ï€Î¹Î»Î¿Î³Î® 2: Î•Î²Î´Î¿Î¼Î±Î´Î¹Î±Î¯Î± ÎµÎºÏ„Î­Î»ÎµÏƒÎ·  
```bash
# ÎšÎ¬Î¸Îµ Î”ÎµÏ…Ï„Î­ÏÎ± ÏƒÏ„Î¹Ï‚ 8:00 Ï€Î¼
0 8 * * 1 /home/theo/projects/linux_version/run_automated_events.sh >> /home/theo/projects/linux_version/logs/cron.log 2>&1
```

#### Î•Ï€Î¹Î»Î¿Î³Î® 3: ÎœÎ·Î½Î¹Î±Î¯Î± ÎµÎºÏ„Î­Î»ÎµÏƒÎ·
```bash
# ÎšÎ¬Î¸Îµ 1Î· Ï„Î¿Ï… Î¼Î®Î½Î± ÏƒÏ„Î¹Ï‚ 7:00 Ï€Î¼
0 7 1 * * /home/theo/projects/linux_version/run_automated_events.sh >> /home/theo/projects/linux_version/logs/cron.log 2>&1
```

## ğŸ“Š Monitoring & Logs

### Log Files
```bash
# ÎšÏÏÎ¹Î¿ log file
tail -f /home/theo/projects/linux_version/logs/automated_events.log

# Cron execution log  
tail -f /home/theo/projects/linux_version/logs/cron.log
```

### ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Events ÏƒÏ„Î¿ Frontend
1. Î†Î½Î¿Î¹Î³Î¼Î± http://demo.localhost:3001
2. ÎšÎ»Î¹Îº ÏƒÏ„Î¿ **ÎºÎ¿Ï…Î´Î¿Ï…Î½Î¬ÎºÎ¹** ÏƒÏ„Î¿ header (Ï€Î¬Î½Ï‰ Î´ÎµÎ¾Î¹Î¬)
3. Î ÏÎ¿Î²Î¿Î»Î® Î½Î­Ï‰Î½ events ÏƒÏ„Î¿ Î´ÎµÎ¾Î¹ÏŒ sidebar

## âš™ï¸ Advanced Configuration

### Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿Î³Î® Î Î±ÏÎ±Î¼Î­Ï„ÏÏ‰Î½

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ±ÏÎ¼ÏŒÏƒÎµÏ„Îµ Ï„Î¿ `create_automated_events.py`:

```python
# Î‘Î»Î»Î±Î³Î® threshold Î³Î¹Î± ÎºÎ±Î¸Ï…ÏƒÏ„ÎµÏÎ®ÏƒÎµÎ¹Ï‚ (default: 30 Î¼Î­ÏÎµÏ‚)  
one_month_ago = timezone.now() - timedelta(days=45)

# Î‘Î»Î»Î±Î³Î® Î¼ÎµÏÏÎ½ Î³Î¹Î± maintenance alerts (default: 5 Î¼Î­ÏÎµÏ‚)
upcoming_threshold = timezone.now().date() + timedelta(days=7)

# Î‘Î»Î»Î±Î³Î® Î¼ÎµÏÏÎ½ Î¼Î·Î½Î¹Î±Î¯Î±Ï‚ Ï…Ï€ÎµÎ½Î¸ÏÎ¼Î¹ÏƒÎ·Ï‚ (default: 1-3 Î¼Î­ÏÎµÏ‚) 
if today.day <= 5:  # Î•Ï€Î­ÎºÏ„Î±ÏƒÎ· ÏƒÎµ 5 Î¼Î­ÏÎµÏ‚
```

### Custom Building Logic
```python
# Î•ÎºÏ„Î­Î»ÎµÏƒÎ· Î¼ÏŒÎ½Î¿ Î³Î¹Î± ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿ ÎºÏ„Î¯ÏÎ¹Î¿
python /app/create_automated_events.py --building 1 --dry-run
```

## ğŸ›¡ï¸ Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î± & Best Practices

### Duplicate Prevention
- âœ… ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï…Ï€Î±ÏÏ‡ÏŒÎ½Ï„Ï‰Î½ events Ï€ÏÎ¹Î½ Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±
- âœ… Time-based deduplication (7 Î¼Î­ÏÎµÏ‚ Î³Î¹Î± overdue, Î¼Î®Î½Î±Ï‚ Î³Î¹Î± reminders)
- âœ… Building-specific event tracking

### Error Handling  
- âœ… Comprehensive logging Î¼Îµ timestamps
- âœ… Docker container health checks
- âœ… Graceful failure Î¼Îµ error codes
- âœ… Rollback support

### Performance
- âœ… Optimized database queries Î¼Îµ select_related
- âœ… Batch processing Î³Î¹Î± multiple apartments
- âœ… Schema context for multi-tenancy

## ğŸ”§ Troubleshooting

### Common Issues

#### "Container not running"
```bash
# ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ containers
docker ps

# Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹
./startup.sh
```

#### "Permission denied"  
```bash
# Fix script permissions
chmod +x /home/theo/projects/linux_version/run_automated_events.sh
```

#### "Database connection error"
```bash
# ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ backend container
docker exec linux_version-backend-1 python manage.py check
```

### Debug Mode
```bash  
# Î•ÎºÏ„Î­Î»ÎµÏƒÎ· Î¼Îµ verbose output
docker exec linux_version-backend-1 python /app/create_automated_events.py --dry-run --building 1
```

## ğŸ“ˆ Metrics & Analytics

### Event Statistics
- Î Î»Î®Î¸Î¿Ï‚ events Î±Î½Î¬ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±
- Response time Î³Î¹Î± maintenance payments  
- Overdue trend analysis
- Building-specific metrics

### Success Metrics
- ğŸ¯ **Automated Detection**: Events Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ½Ï„Î±Î¹ Ï‡Ï‰ÏÎ¯Ï‚ Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î· Ï€Î±ÏÎ­Î¼Î²Î±ÏƒÎ·
- ğŸ¯ **Zero Duplicates**: Duplicate prevention Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ ÏƒÏ‰ÏƒÏ„Î¬
- ğŸ¯ **Timely Alerts**: Maintenance payments ÎµÎ½Ï„Î¿Ï€Î¯Î¶Î¿Î½Ï„Î±Î¹ 5+ Î¼Î­ÏÎµÏ‚ Ï€ÏÎ¹Î½
- ğŸ¯ **Complete Coverage**: ÎŒÎ»Î± Ï„Î± ÎºÏ„Î¯ÏÎ¹Î± ÎºÎ±Î»ÏÏ€Ï„Î¿Î½Ï„Î±Î¹ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î±

## ğŸš€ Future Enhancements

### Î Î¹Î¸Î±Î½Î­Ï‚ Î’ÎµÎ»Ï„Î¹ÏÏƒÎµÎ¹Ï‚
1. **Email Notifications**: Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® emails Î³Î¹Î± urgent events
2. **SMS Alerts**: ÎšÏÎ¯ÏƒÎ¹Î¼ÎµÏ‚ Ï…Ï€ÎµÎ½Î¸Ï…Î¼Î¯ÏƒÎµÎ¹Ï‚ Î¼Î­ÏƒÏ‰ SMS
3. **Slack Integration**: Notifications ÏƒÏ„Î¿ Slack workspace
4. **Custom Rules**: Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± custom rules Î±Î½Î¬ building
5. **Machine Learning**: Predictive alerts based on patterns

### Integration Points
- ğŸ“§ **Email System**: SMTP configuration
- ğŸ“± **Mobile App**: Push notifications  
- ğŸ”— **API Webhooks**: Third-party integrations
- ğŸ“Š **Analytics Dashboard**: Real-time metrics

---

## ğŸ‰ Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±

ÎœÎµ Ï„Î¿ Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± ÎµÏ€Î¹Ï„Ï…Î³Ï‡Î¬Î½ÎµÏ„Îµ:

- âœ… **ÎœÎ·Î´ÎµÎ½Î¹ÎºÎ­Ï‚ Ï€Î±ÏÎ±Î»ÎµÎ¯ÏˆÎµÎ¹Ï‚** ÎºÎ±Î¸Ï…ÏƒÏ„ÎµÏÎ·Î¼Î­Î½Ï‰Î½ Ï€Î»Î·ÏÏ‰Î¼ÏÎ½
- âœ… **Î ÏÎ¿Î»Î·Ï€Ï„Î¹ÎºÎ® Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·** maintenance schedules  
- âœ… **Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Ï…Ï€ÎµÎ½Î¸ÏÎ¼Î¹ÏƒÎ·** ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½ ÎºÎ¬Î¸Îµ Î¼Î®Î½Î±
- âœ… **ÎšÎµÎ½Ï„ÏÎ¹ÎºÎ® Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ·** Î¼Î­ÏƒÏ‰ calendar events
- âœ… **Î Î»Î®ÏÎ·Ï‚ Î´Î¹Î±Ï†Î¬Î½ÎµÎ¹Î±** Î¼Îµ detailed logging

**Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± ÎµÎ¯Î½Î±Î¹ Î­Ï„Î¿Î¹Î¼Î¿ Î³Î¹Î± Î¬Î¼ÎµÏƒÎ· Ï‡ÏÎ®ÏƒÎ·! ğŸš€**