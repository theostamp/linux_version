# ğŸ¢ ÎŸÎ´Î·Î³ÏŒÏ‚ Î ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ ÏƒÎµ Tenant

## âœ… Î¤Î¿ Login Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯!

Î¤Î¿ login ÏƒÏ„Î± tenant subdomains Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚ Î¼ÎµÏ„Î¬ Ï„Î± fixes. ÎŒÎ¼Ï‰Ï‚, Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ ÏƒÏÎ³Ï‡Ï…ÏƒÎ· Î¼Îµ Ï„Î± subdomains.

---

## ğŸ” Î¤Î¿ Î ÏÏŒÎ²Î»Î·Î¼Î± Ï€Î¿Ï… Î‘Î½Ï„Î¹Î¼ÎµÏ„Ï‰Ï€Î¯Î¶ÎµÎ¹Ï‚

Î ÏÎ¿ÏƒÏ€Î±Î¸ÎµÎ¯Ï‚ Î½Î± Î¼Ï€ÎµÎ¹Ï‚ ÏƒÏ„Î¿:
```
âŒ https://theo-etherm.newconcierge.app/
```

Î‘Î»Î»Î¬ Ï„Î¿ tenant Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ ÎµÎ¯Î½Î±Î¹:
```
âœ… https://theo-etherm202.newconcierge.app/
```

---

## ğŸ“Š Î ÏÏ‚ Î”Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹ Ï„Î¿ Tenant Subdomain

ÎŒÏ„Î±Î½ ÎµÎ³Î³ÏÎ¬Ï†ÎµÏƒÎ±Î¹ ÏƒÏ„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î±:

1. **Registration**: Î•Î¹ÏƒÎ¬Î³ÎµÎ¹Ï‚ `First Name` ÎºÎ±Î¹ `Last Name`
   - Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±: `Theo` `Etherm202`

2. **Tenant Creation**: Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ subdomain Î±Ï€ÏŒ Ï„Î± Î¿Î½ÏŒÎ¼Î±Ï„Î±:
   ```
   Schema: {first_name}-{last_name} â†’ theo-etherm202
   ```

3. **Email Notification**: Î›Î±Î¼Î²Î¬Î½ÎµÎ¹Ï‚ email Î¼Îµ Ï„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ URL:
   ```
   Tenant URL: https://theo-etherm202.newconcierge.app/dashboard
   ```

---

## âœ… Î›ÏÏƒÎ·

### Î•Ï€Î¹Î»Î¿Î³Î® 1: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ Î£Ï‰ÏƒÏ„ÏŒ URL

Î Î®Î³Î±Î¹Î½Îµ ÏƒÏ„Î¿ URL Ï€Î¿Ï… Î­Î»Î±Î²ÎµÏ‚ ÏƒÏ„Î¿ email:

```
https://theo-etherm202.newconcierge.app/
```

### Î•Ï€Î¹Î»Î¿Î³Î® 2: Î”Î·Î¼Î¹Î¿ÏÏÎ³Î·ÏƒÎµ ÎÎ­Î¿ Tenant

Î‘Î½ Î¸Î­Î»ÎµÎ¹Ï‚ Ï„Î¿ subdomain `theo-eth`:

1. **Î•Î³Î³ÏÎ±Ï†Î® Î¼Îµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±**:
   - Email: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÏŒ email (Ï€.Ï‡. `test@example.com`)
   - First Name: `Theo`
   - Last Name: `Eth`

2. **Î‘Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î±**:
   - Tenant Schema: `theo-eth`
   - Tenant URL: `https://theo-eth.newconcierge.app/`

### Î•Ï€Î¹Î»Î¿Î³Î® 3: Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Alias Domain (Î ÏÎ¿Ï‡Ï‰ÏÎ·Î¼Î­Î½Î¿)

ÎœÏ€Î¿ÏÎ¿ÏÎ¼Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎ¿Ï…Î¼Îµ Ï„Î¿ `theo-eth.newconcierge.app` Ï‰Ï‚ alias Î³Î¹Î± Ï„Î¿ existing tenant `theo-etherm202`.

---

## ğŸ” Î ÏÏ‚ Î½Î± Î’ÏÎµÎ¹Ï‚ Ï„Î¿ Tenant URL ÏƒÎ¿Ï…

### ÎœÎ­Î¸Î¿Î´Î¿Ï‚ 1: Email Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·Ï‚

ÎšÎ¿Î¯Ï„Î± Ï„Î¿ email Î¼Îµ Î¸Î­Î¼Î±:
```
[New Concierge] ğŸ‰ Î¤Î¿ Workspace ÏƒÎ±Ï‚ ÎµÎ¯Î½Î±Î¹ Î­Ï„Î¿Î¹Î¼Î¿ - {tenant_name}
```

Î¤Î¿ email Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ Ï„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ tenant URL.

### ÎœÎ­Î¸Î¿Î´Î¿Ï‚ 2: ÎœÎµÏ„Î¬ Ï„Î¿ Stripe Payment

ÎœÎµÏ„Î¬ Ï„Î·Î½ Î¿Î»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ· Ï„Î·Ï‚ Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚, Î²Î»Î­Ï€ÎµÎ¹Ï‚:
```
Subscription completed for user etherm2021@gmail.com, tenant: theo-etherm202
Generated tenant_url: https://theo-etherm202.newconcierge.app/dashboard
```

---

## ğŸ› Î“Î¹Î±Ï„Î¯ Ï„Î¿ `/api/buildings/public` ÎµÏ€Î­ÏƒÏ„ÏÎµÏ†Îµ 404

ÎŒÏ„Î±Î½ Ï€Î®Î³ÎµÏ‚ ÏƒÏ„Î¿ `theo-etherm.newconcierge.app`:

1. **Frontend**: Î ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ header `X-Tenant-Schema: theo-eth`
2. **Backend**: Î¨Î¬Ï‡Î½ÎµÎ¹ Î³Î¹Î± tenant Î¼Îµ schema `theo-eth`  
3. **Database**: **Î”Î•Î Î’Î¡Î™Î£ÎšÎ•Î™** Ï„Î­Ï„Î¿Î¹Î¿ tenant (Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î¼ÏŒÎ½Î¿ `theo-etherm202`)
4. **Result**: 404 - No buildings found

Î‘Ï…Ï„ÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿ Î»ÏŒÎ³Î¿Ï‚ Ï€Î¿Ï… Î­Î²Î»ÎµÏ€ÎµÏ‚:
```
GET /api/buildings/public â†’ 404 Not Found
```

---

## ğŸ¯ Î•Ï€ÏŒÎ¼ÎµÎ½Î± Î’Î®Î¼Î±Ï„Î±

### Î•Ï€Î¹Î»Î¿Î³Î® Î‘: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ Î¥Ï€Î¬ÏÏ‡Î¿Î½ Tenant

```bash
# 1. Î Î®Î³Î±Î¹Î½Îµ ÏƒÏ„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ URL
https://theo-etherm202.newconcierge.app/

# 2. ÎšÎ¬Î½Îµ login Î¼Îµ:
Email: etherm2021@gmail.com
Password: [Ï„Î¿ password ÏƒÎ¿Ï…]

# 3. Î˜Î± Î´ÎµÎ¹Ï‚ Ï„Î¿ dashboard Î¼Îµ Ï„Î± demo buildings
```

### Î•Ï€Î¹Î»Î¿Î³Î® Î’: Î”Î·Î¼Î¹Î¿ÏÏÎ³Î·ÏƒÎµ ÎÎ­Î¿ Tenant "theo-eth"

```bash
# 1. Î Î®Î³Î±Î¹Î½Îµ ÏƒÏ„Î¿ main domain
https://newconcierge.app/register

# 2. Î•Î³Î³ÏÎ±Ï†Î® Î¼Îµ Î½Î­Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±:
Email: another-email@example.com
First Name: Theo
Last Name: Eth
Password: [Î½Î­Î¿ password]

# 3. Î•Ï€Î¹Î»Î¿Î³Î® Plan & Payment

# 4. ÎœÎµÏ„Î¬ Ï„Î¿ payment, Î¸Î± ÏƒÎµ Î±Î½Î±ÎºÎ±Ï„ÎµÏ…Î¸ÏÎ½ÎµÎ¹ ÏƒÏ„Î¿:
https://theo-eth.newconcierge.app/dashboard
```

---

## ğŸ“ Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚

### Tenant Naming Rules

- Î¤Î¿ subdomain Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ: `{first_name}-{last_name}`
- ÎŒÎ»Î± Ï„Î± Î³ÏÎ¬Î¼Î¼Î±Ï„Î± Î³Î¯Î½Î¿Î½Ï„Î±Î¹ lowercase
- Î¤Î± spaces Î³Î¯Î½Î¿Î½Ï„Î±Î¹ dashes (`-`)
- Î•Î¹Î´Î¹ÎºÎ¿Î¯ Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚ Î±Ï†Î±Î¹ÏÎ¿ÏÎ½Ï„Î±Î¹

**Î Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î±:**
```
Theo Stamatiou â†’ theo-stamatiou
John Doe â†’ john-doe
Maria Papadopoulou â†’ maria-papadopoulou
```

### Tenant Data Isolation

ÎšÎ¬Î¸Îµ tenant Î­Ï‡ÎµÎ¹:
- **ÎÎµÏ‡Ï‰ÏÎ¹ÏƒÏ„ÏŒ database schema** (Ï€Î»Î®ÏÎ·Ï‚ Î±Ï€Î¿Î¼ÏŒÎ½Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½)
- **Î”Î¹ÎºÎ¬ Ï„Î¿Ï… buildings, apartments, users**
- **Î”Î¹ÎºÏŒ Ï„Î¿Ï… billing subscription**
- **Demo data** (1 building Î¼Îµ 10 apartments) ÎºÎ±Ï„Î¬ Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±

---

## ğŸ”§ Troubleshooting

### "404 Not Found" ÏƒÎµ /api/buildings/public

**Î‘Î¹Ï„Î¯Î±**: Î›Î¬Î¸Î¿Ï‚ tenant subdomain

**Î›ÏÏƒÎ·**: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ subdomain Î±Ï€ÏŒ Ï„Î¿ email

### "No buildings found"

**Î‘Î¹Ï„Î¯Î±**: Î¤Î¿ tenant Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ Ï‡Ï‰ÏÎ¯Ï‚ demo data

**Î›ÏÏƒÎ·**: Î”Î·Î¼Î¹Î¿ÏÏÎ³Î·ÏƒÎµ building manually Î±Ï€ÏŒ Ï„Î¿ dashboard

### "Login fails on tenant subdomain"

**Î‘Î¹Ï„Î¯Î±**: Caching issue Î® Ï„Î¿ deployment Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿Î»Î¿ÎºÎ»Î·ÏÏ‰Î¸ÎµÎ¯

**Î›ÏÏƒÎ·**:
1. Hard refresh (Ctrl+Shift+R)
2. Clear localStorage: `localStorage.clear()`
3. Reload ÎºÎ±Î¹ Î´Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬

---

## ğŸ“ Î•Ï€ÏŒÎ¼ÎµÎ½Î± Î’Î®Î¼Î±Ï„Î±

Î£Ï„ÎµÎ¯Î»Îµ Î¼Î¿Ï…:
1. **Î Î¿Î¹Î± ÎµÏ€Î¹Î»Î¿Î³Î® Î¸Î­Î»ÎµÎ¹Ï‚;** (Î‘: Use theo-etherm202, Î’: Create theo-eth)
2. **Screenshots** ÏŒÏ„Î±Î½ ÎºÎ¬Î½ÎµÎ¹Ï‚ login ÏƒÏ„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ subdomain
3. **Console logs** Î±Î½ ÎµÎ¾Î±ÎºÎ¿Î»Î¿Ï…Î¸Î¿ÏÎ½ Î½Î± Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ errors

Î¤Î¿ login Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ Ï„ÏÏÎ± - Î±Ï€Î»Î¬ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï€Î±Ï‚ ÏƒÏ„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ subdomain! ğŸš€

