<!DOCTYPE html>
<html>
<head>
    <title>Debug Frontend State</title>
</head>
<body>
    <h1>Debug Frontend State - Month Display Issue</h1>
    <div id="output"></div>
    
    <script>
        // Add this script to the browser console when viewing the modal
        function debugModalState() {
            console.log('üîç DEBUGGING MODAL STATE');
            console.log('=' .repeat(50));
            
            // Try to find the state object in React DevTools or global scope
            const reactFiberKey = Object.keys(document.querySelector('[data-testid="common-expense-modal"], .modal, [class*="modal"]') || {}).find(key => key.startsWith('__reactFiber'));
            
            if (reactFiberKey) {
                console.log('Found React Fiber key:', reactFiberKey);
            }
            
            // Check localStorage for any cached state
            console.log('\nüì¶ LocalStorage contents:');
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                console.log(`   ${key}: ${value}`);
            }
            
            // Check sessionStorage
            console.log('\nüì¶ SessionStorage contents:');
            for (let i = 0; i < sessionStorage.length; i++) {
                const key = sessionStorage.key(i);
                const value = sessionStorage.getItem(key);
                console.log(`   ${key}: ${value}`);
            }
            
            // Test date calculation directly
            console.log('\nüìÖ Testing date calculations:');
            const testMonths = ['2025-07', '2025-06', '2025-05', '2025-08'];
            
            testMonths.forEach(selectedMonth => {
                if (selectedMonth) {
                    const [year, month] = selectedMonth.split('-');
                    const date = new Date(parseInt(year), parseInt(month) - 1, 1);
                    const formatted = date.toLocaleDateString('el-GR', { month: 'long', year: 'numeric' });
                    console.log(`   ${selectedMonth} ‚Üí ${formatted}`);
                }
            });
        }
        
        // Instructions for user
        document.getElementById('output').innerHTML = `
            <h2>Instructions:</h2>
            <ol>
                <li>Open the financial dashboard</li>
                <li>Open the common expense modal</li>
                <li>Open browser DevTools (F12)</li>
                <li>Go to Console tab</li>
                <li>Paste and run this function:</li>
            </ol>
            
            <textarea style="width: 100%; height: 200px; font-family: monospace;">
// Paste this in browser console when modal is open
function debugModalState() {
    console.log('üîç DEBUGGING MODAL STATE');
    
    // Find modal element
    const modal = document.querySelector('[class*="modal"], [class*="Modal"], .fixed.inset-0');
    console.log('Modal element:', modal);
    
    // Look for period display elements
    const periodElements = document.querySelectorAll('*');
    const periodTexts = [];
    
    periodElements.forEach(el => {
        const text = el.textContent || '';
        if (text.includes('2025') || text.includes('ŒôŒøœçŒªŒπŒøœÇ') || text.includes('ŒôŒøœçŒΩŒπŒøœÇ') || text.includes('ŒúŒ¨ŒπŒøœÇ')) {
            periodTexts.push({
                element: el.tagName,
                text: text.trim(),
                classes: el.className
            });
        }
    });
    
    console.log('Period-related elements:', periodTexts);
    
    // Check for React state in window
    if (window.React || window.__REACT_DEVTOOLS_GLOBAL_HOOK__) {
        console.log('React detected');
    }
    
    return periodTexts;
}

debugModalState();
            </textarea>
            
            <h3>What to look for:</h3>
            <ul>
                <li>Check if selectedMonth shows correct value (e.g., "2025-07" for July)</li>
                <li>Look for any cached state in localStorage/sessionStorage</li>
                <li>See what period text is actually displayed in DOM</li>
                <li>Check if multiple period calculations exist</li>
            </ul>
        `;
    </script>
</body>
</html>
