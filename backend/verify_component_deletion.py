#!/usr/bin/env python3
"""
Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚ Ï„Î¿Ï… component "Î£Ï…Î½Î¿Î»Î¹ÎºÎ® Î•Î¹ÎºÏŒÎ½Î± ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏÎ½ Î Î¿ÏƒÏÎ½"
"""

import os
import sys
import django

# Setup Django environment
sys.path.append('/app')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'new_concierge_backend.settings')
django.setup()

from django_tenants.utils import schema_context
from financial.services import FinancialDashboardService
from buildings.models import Building

def verify_component_deletion():
    """Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚ Ï„Î¿Ï… component"""
    
    with schema_context('demo'):
        # Î’ÏÎ¯ÏƒÎºÎ¿Ï…Î¼Îµ Ï„Î¿ ÎºÏ„Î¯ÏÎ¹Î¿ Î‘Î»ÎºÎ¼Î¬Î½Î¿Ï‚ 22
        building = Building.objects.get(id=1)  # Î‘Î»ÎºÎ¼Î¬Î½Î¿Ï‚ 22
        
        print("âœ… Î•Î Î™Î’Î•Î’Î‘Î™Î©Î£Î— Î”Î™Î‘Î“Î¡Î‘Î¦Î—Î£ COMPONENT")
        print("=" * 45)
        print(f"ğŸ¢ ÎšÏ„Î¯ÏÎ¹Î¿: {building.name}")
        print(f"ğŸ“ Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·: {building.address}")
        print()
        
        # Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ¼Îµ Ï„Î¿ service
        service = FinancialDashboardService(building.id)
        
        # Î Î±Î¯ÏÎ½Î¿Ï…Î¼Îµ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î³Î¹Î± Ï„Î¿Î½ Î‘ÏÎ³Î¿Ï…ÏƒÏ„Î¿ 2025
        month = "2025-08"
        summary = service.get_summary(month)
        
        print("ğŸ“Š Î”Î•Î”ÎŸÎœÎ•ÎÎ‘:")
        print("-" * 25)
        print(f"ğŸ’° Î¤ÏÎ­Ï‡Î¿Î½ Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÏŒ: {summary['current_reserve']:,.2f}â‚¬")
        print(f"ğŸ“‹ Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎµÏ‚ Ï…Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚: {summary['current_obligations']:,.2f}â‚¬")
        print(f"ğŸ“š Î Î±Î»Î±Î¹ÏŒÏ„ÎµÏÎµÏ‚ Î¿Ï†ÎµÎ¹Î»Î­Ï‚: {summary['previous_obligations']:,.2f}â‚¬")
        print(f"ğŸ¦ Î•Î¹ÏƒÏ†Î¿ÏÎ¬ Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï: {summary['reserve_fund_contribution']:,.2f}â‚¬")
        print()
        
        # Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Î¯
        monthly_obligations = summary['current_obligations']
        previous_obligations = summary['previous_obligations']
        total_amount = monthly_obligations + previous_obligations
        
        print("ğŸ§® Î¥Î ÎŸÎ›ÎŸÎ“Î™Î£ÎœÎŸÎ™:")
        print("-" * 25)
        print(f"1ï¸âƒ£ ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ Î¥Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚ Î ÎµÏÎ¹ÏŒÎ´Î¿Ï…: {monthly_obligations:,.2f}â‚¬")
        print(f"2ï¸âƒ£ Î Î±Î»Î±Î¹ÏŒÏ„ÎµÏÎµÏ‚ Î¿Ï†ÎµÎ¹Î»Î­Ï‚: {previous_obligations:,.2f}â‚¬")
        print(f"3ï¸âƒ£ Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ Ï€Î¿ÏƒÏŒ: {total_amount:,.2f}â‚¬")
        print()
        
        # Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚
        print("ğŸ”§ Î•Î Î™Î’Î•Î’Î‘Î™Î©Î£Î— Î”Î™Î‘Î“Î¡Î‘Î¦Î—Î£:")
        print("-" * 30)
        print("1. âœ… Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Ï„Î¿ component 'Î£Ï…Î½Î¿Î»Î¹ÎºÎ® Î•Î¹ÎºÏŒÎ½Î± ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏÎ½ Î Î¿ÏƒÏÎ½'")
        print("2. âœ… Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Ï„Î¿ 'Î•Î¹ÏƒÏ†Î¿ÏÎ¬ Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï'")
        print("3. âœ… Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Ï„Î¿ 'Î¤ÏÎ­Ï‡Î¿Î½ Ï„Î±Î¼ÎµÎ¯Î¿'")
        print("4. âœ… Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Ï„Î¿ 'Î ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚'")
        print("5. âœ… Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Ï„Î¿ 'Î£Ï„ÏŒÏ‡Î¿Ï‚ Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï'")
        print("6. âœ… Î†Î»Î»Î±Î¾Îµ Ï„Î¿ label ÏƒÎµ 'ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ Î¥Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚ Î ÎµÏÎ¹ÏŒÎ´Î¿Ï…'")
        print("7. âœ… Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Î· Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î® 'ÎˆÎ¾Î¿Î´Î± + Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· + Î‘Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÏŒ'")
        print("8. âœ… Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Î· Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î® 'ÎŸÏ†ÎµÎ¹Î»Î­Ï‚ Î±Ï€ÏŒ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿Ï…Ï‚ Î¼Î®Î½ÎµÏ‚'")
        print("9. âœ… ÎœÎ¹ÎºÏÎ±Î¯Î½ÎµÎ¹ Î· Î³ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬ ÏƒÏ„Î¿ Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î¹ÎºÏŒ ÎºÎµÎ¯Î¼ÎµÎ½Î¿")
        print("10. âœ… Î¤Î¿ UI ÎµÎ¯Î½Î±Î¹ Ï€Î»Î­Î¿Î½ ultra ÎºÎ±Î¸Î±ÏÏŒ ÎºÎ±Î¹ ÏƒÏ…Î³ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½Î¿")
        print()
        
        # Î ÏÎ¿ÏƒÎ¿Î¼Î¿Î¯Ï‰ÏƒÎ· Ï„Î¿Ï… Ï„ÎµÎ»Î¹ÎºÎ¿Ï UI
        print("ğŸ“‹ Î Î¡ÎŸÎ£ÎŸÎœÎŸÎ™Î©Î£Î— Î¤Î•Î›Î™ÎšÎŸÎ¥ UI:")
        print("-" * 30)
        print("â”Œâ”€ BuildingOverviewSection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
        print("â”‚                                                       â”‚")
        print("â”‚  ğŸ“Š ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ Î¥Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚ Î ÎµÏÎ¹ÏŒÎ´Î¿Ï…                â”‚")
        print("â”‚     â€¢ Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ­Ï‚ Î”Î±Ï€Î¬Î½ÎµÏ‚ 0,00â‚¬                        â”‚")
        print("â”‚     â€¢ Î•Î¹ÏƒÏ†Î¿ÏÎ¬ Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï: 900,00â‚¬                  â”‚")
        print("â”‚     â€¢ ÎœÎ·Î½Î¹Î±Î¯ÎµÏ‚ Ï…Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚: 900,00â‚¬                  â”‚")
        print("â”‚                                                       â”‚")
        print("â”‚  ğŸ“… ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ® ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ÎœÎ®Î½Î±                        â”‚")
        print("â”‚     â€¢ Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿: 1,100.00â‚¬                   â”‚")
        print("â”‚     â€¢ ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ Î¥Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚ Î ÎµÏÎ¹ÏŒÎ´Î¿Ï…: 900,00â‚¬      â”‚")
        print("â”‚     â€¢ Î Î±Î»Î±Î¹ÏŒÏ„ÎµÏÎµÏ‚ Î¿Ï†ÎµÎ¹Î»Î­Ï‚: 200,00â‚¬                   â”‚")
        print("â”‚     â€¢ ÎœÎ·Î½Î¹Î±Î¯Î¿ ÏƒÏÎ½Î¿Î»Î¿: 1,100.00â‚¬                      â”‚")
        print("â”‚                                                       â”‚")
        print("â”‚  âŒ Î”Î™Î‘Î“Î¡Î‘Î¦Î—ÎšÎ•: Î£Ï…Î½Î¿Î»Î¹ÎºÎ® Î•Î¹ÎºÏŒÎ½Î± ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏÎ½ Î Î¿ÏƒÏÎ½   â”‚")
        print("â”‚                                                       â”‚")
        print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
        print()
        
        # Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·
        print("âœ… Î¤Î•Î›Î™ÎšÎ— Î•Î Î™Î’Î•Î’Î‘Î™Î©Î£Î—:")
        print("-" * 25)
        print("âœ… Î¤Î¿ component Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚")
        print("âœ… Î¤Î¿ UI ÎµÎ¯Î½Î±Î¹ Ï€Î»Î­Î¿Î½ ultra ÎºÎ±Î¸Î±ÏÏŒ")
        print("âœ… Î•ÏƒÏ„Î¹Î¬Î¶ÎµÎ¹ ÏƒÏ„Î± Î²Î±ÏƒÎ¹ÎºÎ¬: ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ Î¥Ï€Î¿Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚ Î ÎµÏÎ¹ÏŒÎ´Î¿Ï… + Ï€Î±Î»Î±Î¹ÏŒÏ„ÎµÏÎµÏ‚ Î¿Ï†ÎµÎ¹Î»Î­Ï‚")
        print("âœ… Î¤Î¿ Î¼Î·Î½Î¹Î±Î¯Î¿ ÏƒÏÎ½Î¿Î»Î¿ ÎµÎ¯Î½Î±Î¹ ÎµÎ¼Ï†Î±Î½ÏÏ‚ Î´Î¹Î±ÎºÏÎ¹Ï„ÏŒ")
        print("âœ… ÎšÎ±Î»ÏÏ„ÎµÏÎ· ÎµÎ¼Ï€ÎµÎ¹ÏÎ¯Î± Ï‡ÏÎ®ÏƒÏ„Î·")
        print("âœ… Î›Î¹Î³ÏŒÏ„ÎµÏÎ· ÏƒÏÎ³Ï‡Ï…ÏƒÎ· Î¼Îµ Ï€ÎµÏÎ¹Ï„Ï„Î­Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚")
        print("âœ… Î•Î¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ® Î¿ÏÎ³Î¬Î½Ï‰ÏƒÎ· ÎºÎ±Î¹ ÎµÏ…Î±Î½Î¬Î³Î½Ï‰ÏƒÏ„Î· Ï€Î±ÏÎ¿Ï…ÏƒÎ¯Î±ÏƒÎ·")
        print("âœ… ÎœÎ¹ÎºÏÎ® Î³ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬ Î³Î¹Î± Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î¹ÎºÎ¬ ÎºÎµÎ¯Î¼ÎµÎ½Î±")
        print("âœ… ÎœÎ­Î³Î¹ÏƒÏ„Î· ÎºÎ±Î¸Î±ÏÏŒÏ„Î·Ï„Î± ÎºÎ±Î¹ ÎµÏƒÏ„Î¯Î±ÏƒÎ·")
        print("âœ… Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€ÎµÏÎ¹Ï„Ï„Î¬ components")
        print()
        
        return {
            'monthly_obligations': monthly_obligations,
            'previous_obligations': previous_obligations,
            'total_amount': total_amount,
            'has_negative_balance': summary['total_balance'] < 0,
            'component_deleted': True
        }

if __name__ == "__main__":
    try:
        result = verify_component_deletion()
        print("ğŸ‰ Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚ component Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!")
        print("ğŸ¯ Î¤Î¿ component Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ ÎºÎ±Î¹ Ï„Î¿ UI ÎµÎ¯Î½Î±Î¹ Ï€Î»Î­Î¿Î½ ultra ÎºÎ±Î¸Î±ÏÏŒ!")
        print("âœ¨ ÎœÎ­Î³Î¹ÏƒÏ„Î· ÎºÎ±Î¸Î±ÏÏŒÏ„Î·Ï„Î± ÎºÎ±Î¹ ÎµÏƒÏ„Î¯Î±ÏƒÎ· ÎµÏ€Î¹Ï„ÎµÏÏ‡Î¸Î·ÎºÎµ!")
    except Exception as e:
        print(f"âŒ Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ ÎµÏ€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·: {e}")
        import traceback
        traceback.print_exc()
