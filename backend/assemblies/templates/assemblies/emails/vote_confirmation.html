<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Επιβεβαίωση Ψήφου</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #1f2937; background-color: #f3f4f6;">
    <div style="width: 100%; max-width: 600px; margin: 0 auto; background-color: #ffffff;">
        <div style="background-color: #059669; background-image: linear-gradient(135deg, #059669 0%, #10b981 100%); padding: 40px 30px; text-align: center;">
            <h1 style="color: #ffffff; font-size: 28px; font-weight: 700; margin: 0 0 8px;">✅ Επιβεβαίωση Ψήφου</h1>
            <p style="color: rgba(255, 255, 255, 0.85); font-size: 16px; margin: 0;">{{ building.name }}</p>
            <div style="display: inline-block; background-color: rgba(255, 255, 255, 0.2); color: #ffffff; padding: 12px 24px; border-radius: 50px; font-size: 16px; font-weight: 600; margin-top: 16px;">
                <span style="font-size: 24px; margin-right: 6px;">🗳️</span>
                <span>Η ψήφος σας καταχωρήθηκε</span>
            </div>
        </div>

        <div style="padding: 30px;">
            <p style="font-size: 18px; color: #374151; margin: 0 0 20px;">
                Αγαπητέ/ή {{ user.first_name|default:"Ιδιοκτήτη/Ένοικε" }},
            </p>

            <div style="background-color: #ecfdf5; background-image: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border: 1px solid #a7f3d0; border-radius: 12px; padding: 24px; margin: 0 0 24px; text-align: center;">
                <h2 style="color: #047857; font-size: 22px; margin: 0 0 8px;">Ευχαριστούμε για τη συμμετοχή σας!</h2>
                <p style="color: #059669; font-size: 14px; margin: 0;">Η ψήφος σας καταχωρήθηκε επιτυχώς για τη συνέλευση:</p>
                <p style="font-weight: 600; color: #047857; margin: 8px 0 0;">{{ assembly.title }}</p>

                <table role="presentation" align="center" cellpadding="0" cellspacing="0" style="border-collapse: collapse; margin: 16px auto 0;">
                    <tr>
                        <td style="padding: 0 12px; text-align: center;">
                            <div style="font-size: 32px; font-weight: 700; color: #047857;">{{ votes|length }}</div>
                            <div style="font-size: 12px; color: #6b7280; text-transform: uppercase;">Ψήφοι</div>
                        </td>
                        <td style="padding: 0 12px; text-align: center;">
                            <div style="font-size: 32px; font-weight: 700; color: #047857;">{{ total_mills }}</div>
                            <div style="font-size: 12px; color: #6b7280; text-transform: uppercase;">χιλιοστά</div>
                        </td>
                    </tr>
                </table>
            </div>

            <h3 style="font-size: 16px; font-weight: 600; color: #1f2937; margin: 0 0 16px; padding-bottom: 8px; border-bottom: 2px solid #e5e7eb;">📊 Αναλυτικά οι ψήφοι σας</h3>
            {% for vote in votes %}
            <div style="background-color: #f9fafb; border-radius: 8px; border: 1px solid #e5e7eb; padding: 16px; margin: 0 0 8px;">
                <div style="font-weight: 500; color: #1f2937; margin: 0 0 4px;">Θέμα {{ vote.item_order }}: {{ vote.item_title }}</div>
                <div style="font-size: 12px; color: #9ca3af; margin: 0 0 8px;">{{ vote.mills }} χιλιοστά • {{ vote.voted_at|date:"d/m/Y H:i" }}</div>
                <span style="display: inline-block; padding: 8px 16px; border-radius: 20px; font-weight: 600; font-size: 14px; {% if vote.vote_display == 'Υπέρ' %}background-color: #d1fae5; color: #047857;{% elif vote.vote_display == 'Κατά' %}background-color: #fee2e2; color: #b91c1c;{% else %}background-color: #f3f4f6; color: #6b7280;{% endif %}">
                    {% if vote.vote_display == 'Υπέρ' %}✓{% elif vote.vote_display == 'Κατά' %}✗{% else %}○{% endif %}
                    {{ vote.vote_display }}
                </span>
            </div>
            {% endfor %}

            <div style="background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin: 0 0 24px;">
                <h4 style="font-size: 14px; color: #475569; margin: 0 0 8px;">🕐 Χρονοσφραγίδα Καταχώρησης</h4>
                <div style="font-family: 'Courier New', monospace; font-size: 13px; color: #1e293b; background-color: #e2e8f0; padding: 8px 12px; border-radius: 4px; display: inline-block;">
                    {{ voted_at|date:"Y-m-d H:i:s" }} UTC
                </div>
                <p style="font-size: 12px; color: #64748b; margin: 8px 0 0;">
                    Διατηρήστε αυτό το email ως απόδειξη της ψήφου σας.
                </p>
            </div>

            <div style="background-color: #fffbeb; border: 1px solid #fde68a; border-radius: 8px; padding: 16px; margin: 0 0 24px;">
                <h4 style="font-size: 14px; color: #92400e; margin: 0 0 8px;">⚖️ Σημαντική Ενημέρωση</h4>
                <p style="font-size: 13px; color: #a16207; margin: 0;">
                    Η ψήφος σας καταχωρήθηκε ηλεκτρονικά και θα συμπεριληφθεί στα επίσημα αποτελέσματα
                    της Γενικής Συνέλευσης. Σε περίπτωση που παρευρεθείτε φυσικά στη συνέλευση,
                    θα έχετε τη δυνατότητα να αλλάξετε την ψήφο σας επί τόπου. Η τελική ψήφος που θα
                    καταγραφεί στα πρακτικά θα είναι η ψήφος που δόθηκε κατά τη διάρκεια της συνέλευσης.
                </p>
            </div>

            <div style="text-align: center; padding: 20px;">
                <a href="{{ assembly_url }}" style="display: inline-block; background-color: #4f46e5; background-image: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-weight: 600; font-size: 16px;">Δείτε τη Συνέλευση</a>
            </div>
        </div>

        <div style="background-color: #1f2937; padding: 24px 30px; text-align: center;">
            <p style="color: #f3f4f6; font-weight: 600; margin: 0 0 8px;">{{ building.name }}</p>
            <p style="color: #9ca3af; font-size: 13px; margin: 0 0 8px;">{{ building.address }}{% if building.city %}, {{ building.city }}{% endif %}</p>
            <p style="margin-top: 12px; font-size: 11px; color: #6b7280;">
                Αυτό το email στάλθηκε αυτόματα ως επιβεβαίωση της ψήφου σας.<br>
                © {{ now|date:"Y" }} New Concierge. Με επιφύλαξη παντός δικαιώματος.
            </p>
        </div>
    </div>
</body>
</html>
