#!/usr/bin/env python3
"""
Script Î³Î¹Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï€ÏÎ¿ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼Î­Î½Ï‰Î½ Ï€Î±ÎºÎ­Ï„Ï‰Î½ Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½
"""

import os
import sys
import django

# Setup Django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'new_concierge_backend.settings')
django.setup()

from django_tenants.utils import tenant_context
from tenants.models import Client
from buildings.models import ServicePackage
from decimal import Decimal

def create_service_packages():
    """Î”Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Ï€ÏÎ¿ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î± Ï€Î±ÎºÎ­Ï„Î± Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½"""
    
    print("ğŸ“¦ Î”Î—ÎœÎ™ÎŸÎ¥Î¡Î“Î™Î‘ Î Î‘ÎšÎ•Î¤Î©Î Î¥Î Î—Î¡Î•Î£Î™Î©Î")
    print("=" * 60)
    
    # Get demo tenant
    try:
        client = Client.objects.get(schema_name='demo')
        print(f"âœ… Î’ÏÎ­Î¸Î·ÎºÎµ tenant: {client.name}")
    except Client.DoesNotExist:
        print("âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ demo tenant")
        return
    
    # Check in tenant context
    with tenant_context(client):
        # Delete existing packages
        ServicePackage.objects.all().delete()
        print("ğŸ—‘ï¸ Î”Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎ±Î½ Ï…Ï€Î¬ÏÏ‡Î¿Î½Ï„Î± Ï€Î±ÎºÎ­Ï„Î±")
        
        # Create predefined packages
        packages_data = [
            {
                'name': 'Î’Î±ÏƒÎ¹ÎºÏŒ Î Î±ÎºÎ­Ï„Î¿',
                'description': 'Î’Î±ÏƒÎ¹ÎºÎ­Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Ï€Î¿Î»Ï…ÎºÎ±Ï„Î¿Î¹ÎºÎ¯Î±Ï‚',
                'fee_per_apartment': Decimal('5.00'),
                'services_included': [
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎºÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Ï‰Î½',
                    'Î•ÎºÎºÎ±Î¸Î¬ÏÎ¹ÏƒÎ· Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎµÏ€Î¹ÏƒÎºÎµÏ…ÏÎ½',
                    'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼Îµ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î­Ï‚'
                ]
            },
            {
                'name': 'Î ÏÏŒÏ„Ï…Ï€Î¿ Î Î±ÎºÎ­Ï„Î¿',
                'description': 'Î ÏÏŒÏ„Ï…Ï€ÎµÏ‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Î¼Îµ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬',
                'fee_per_apartment': Decimal('10.00'),
                'services_included': [
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎºÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Ï‰Î½',
                    'Î•ÎºÎºÎ±Î¸Î¬ÏÎ¹ÏƒÎ· Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎµÏ€Î¹ÏƒÎºÎµÏ…ÏÎ½',
                    'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼Îµ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î­Ï‚',
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï',
                    'Î•Ï„Î®ÏƒÎ¹ÎµÏ‚ ÎµÎºÎ¸Î­ÏƒÎµÎ¹Ï‚',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼Î¿Ï'
                ]
            },
            {
                'name': 'Î ÏÎ¿Î·Î³Î¼Î­Î½Î¿ Î Î±ÎºÎ­Ï„Î¿',
                'description': 'Î ÏÎ¿Î·Î³Î¼Î­Î½ÎµÏ‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Î¼Îµ Ï€Î»Î®ÏÎ· Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·',
                'fee_per_apartment': Decimal('15.00'),
                'services_included': [
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎºÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Ï‰Î½',
                    'Î•ÎºÎºÎ±Î¸Î¬ÏÎ¹ÏƒÎ· Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎµÏ€Î¹ÏƒÎºÎµÏ…ÏÎ½',
                    'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼Îµ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î­Ï‚',
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï',
                    'Î•Ï„Î®ÏƒÎ¹ÎµÏ‚ ÎµÎºÎ¸Î­ÏƒÎµÎ¹Ï‚',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼Î¿Ï',
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î±ÏƒÏ†Î±Î»Î¹ÏƒÏ„Î¹ÎºÏÎ½',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚',
                    '24/7 Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·',
                    'Î¨Î·Ï†Î¹Î±ÎºÎ® Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î±'
                ]
            },
            {
                'name': 'Premium Î Î±ÎºÎ­Ï„Î¿',
                'description': 'Premium Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Î¼Îµ ÎµÎ¾Î±Ï„Î¿Î¼Î¹ÎºÎµÏ…Î¼Î­Î½Î· Ï†ÏÎ¿Î½Ï„Î¯Î´Î±',
                'fee_per_apartment': Decimal('25.00'),
                'services_included': [
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎºÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Ï‰Î½',
                    'Î•ÎºÎºÎ±Î¸Î¬ÏÎ¹ÏƒÎ· Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏÎ½',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎµÏ€Î¹ÏƒÎºÎµÏ…ÏÎ½',
                    'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼Îµ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î­Ï‚',
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï',
                    'Î•Ï„Î®ÏƒÎ¹ÎµÏ‚ ÎµÎºÎ¸Î­ÏƒÎµÎ¹Ï‚',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼Î¿Ï',
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î±ÏƒÏ†Î±Î»Î¹ÏƒÏ„Î¹ÎºÏÎ½',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚',
                    '24/7 Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·',
                    'Î¨Î·Ï†Î¹Î±ÎºÎ® Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î±',
                    'Î•Î¾Î±Ï„Î¿Î¼Î¹ÎºÎµÏ…Î¼Î­Î½Î· Ï†ÏÎ¿Î½Ï„Î¯Î´Î±',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ®Ï€Î¿Ï…',
                    'Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· parking',
                    'Î£Ï…Î½Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ events'
                ]
            }
        ]
        
        created_packages = []
        for package_data in packages_data:
            package = ServicePackage.objects.create(**package_data)
            created_packages.append(package)
            print(f"âœ… Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ: {package.name} - {package.fee_per_apartment}â‚¬/Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±")
        
        print(f"\nğŸ‰ Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎ±Î½ {len(created_packages)} Ï€Î±ÎºÎ­Ï„Î± Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½!")
        
        # Show summary
        print(f"\nğŸ“Š Î£Î¥ÎÎŸÎ¨Î— Î Î‘ÎšÎ•Î¤Î©Î:")
        for package in created_packages:
            print(f"   - {package.name}: {package.fee_per_apartment}â‚¬/Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±")
            print(f"     Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚: {package.get_services_list()}")
            print()

if __name__ == "__main__":
    create_service_packages()
