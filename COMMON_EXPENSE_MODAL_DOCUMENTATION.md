# ğŸ“‹ Modal "Î¦ÏÎ»Î»Î¿ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½" - Î¤ÎµÎºÎ¼Î·ÏÎ¯Ï‰ÏƒÎ· Î£Ï…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚

## ğŸ¯ Î•Ï€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ·

Î¤Î¿ **Modal "Î¦ÏÎ»Î»Î¿ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½"** ÎµÎ¯Î½Î±Î¹ Î­Î½Î± ÎºÎµÎ½Ï„ÏÎ¹ÎºÏŒ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î¿ Ï„Î¿Ï… Î¿Î¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ¿Ï ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚ Ï€Î¿Ï… Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Î»ÎµÏ€Ï„Î¿Î¼ÎµÏÎ® Ï€ÏÎ¿Î²Î¿Î»Î® ÎºÎ±Î¹ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Ï„Ï‰Î½ ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½ Î³Î¹Î± ÎºÎ¬Î¸Îµ ÎºÏ„Î¯ÏÎ¹Î¿. Î¤Î¿ modal Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ Ï„ÏÎµÎ¹Ï‚ Î²Î±ÏƒÎ¹ÎºÎ­Ï‚ ÎºÎ±ÏÏ„Î­Î»ÎµÏ‚:

1. **ğŸ“„ Î¦ÏÎ»Î»Î¿ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½** - ÎšÏÏÎ¹Î¿ Î­Î³Î³ÏÎ±Ï†Î¿ Î¼Îµ Ï€Î¯Î½Î±ÎºÎ± Î±Î½Î¬Î»Ï…ÏƒÎ·Ï‚
2. **ğŸ“Š Î‘Î½Î¬Î»Ï…ÏƒÎ·** - Î“ÏÎ±Ï†Î®Î¼Î±Ï„Î± ÎºÎ±Î¹ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬
3. **ğŸ’¾ Î•Î¾Î±Î³Ï‰Î³Î®** - PDF/Excel export

---

## ğŸ—ï¸ Î‘ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ® Î‘ÏÏ‡ÎµÎ¯Ï‰Î½

### ğŸ“ Frontend Components

```
frontend/components/financial/calculator/
â”œâ”€â”€ CommonExpenseModal.tsx          # ÎšÏÏÎ¹Î¿ modal component
â”œâ”€â”€ ExpenseBreakdownSection.tsx     # ÎšÎ±ÏÏ„Î­Î»Î± Î±Î½Î¬Î»Ï…ÏƒÎ·Ï‚ Î¼Îµ Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î±
â”œâ”€â”€ CalculatorWizard.tsx            # Wizard Î³Î¹Î± Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿ÏÏ‚
â”œâ”€â”€ ResultsStep.tsx                 # Î’Î®Î¼Î± Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½
â””â”€â”€ CommonExpenseCalculator.tsx     # ÎšÏÏÎ¹Î¿ calculator component
```

### ğŸ“ Backend Services

```
backend/financial/
â”œâ”€â”€ services.py                     # Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏÎ½
â”œâ”€â”€ models.py                       # ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ¬ models
â”œâ”€â”€ views.py                        # API endpoints
â””â”€â”€ serializers.py                  # Data serializers
```

---

## ğŸ”§ ÎšÏÏÎ¹Î¿ Component: CommonExpenseModal.tsx

### ğŸ“‹ Props Interface

```typescript
interface CommonExpenseModalProps {
  isOpen: boolean;                    // ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· modal
  onClose: () => void;               // Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· ÎºÎ»ÎµÎ¹ÏƒÎ¯Î¼Î±Ï„Î¿Ï‚
  state: CalculatorState;            // ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏÎ½
  buildingId: number;                // ID ÎºÏ„Î¹ÏÎ¯Î¿Ï…
  buildingName?: string;             // ÎŒÎ½Î¿Î¼Î± ÎºÏ„Î¹ÏÎ¯Î¿Ï…
  managementFeePerApartment?: number; // Î‘Î¼Î¿Î¹Î²Î® Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Î±Î½Î¬ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±
  reserveContributionPerApartment?: number; // Î•Î¹ÏƒÏ†Î¿ÏÎ¬ Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï
}
```

### ğŸ¯ Î’Î±ÏƒÎ¹ÎºÎ­Ï‚ Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚

#### 1. **Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎœÎµÏÎ¹Î´Î¯Ï‰Î½**
```typescript
const calculateExpenseBreakdown = () => {
  // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î±Î½Î¬ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î´Î±Ï€Î±Î½ÏÎ½
  return {
    common: 230,      // Î”.Î•.Î—. ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½
    elevator: 0,      // Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±Ï‚
    heating: 1500,    // Î˜Î­ÏÎ¼Î±Î½ÏƒÎ·
    other: 0,         // Î†Î»Î»ÎµÏ‚ Î´Î±Ï€Î¬Î½ÎµÏ‚
    coownership: 0    // Î£Ï…Î½Î¹Î´Î¹Î¿ÎºÏ„Î·ÏƒÎ¯Î±
  };
};
```

#### 2. **Î Î¯Î½Î±ÎºÎ±Ï‚ Î‘ÎÎ‘Î›Î¥Î£Î— ÎšÎ‘Î¤Î‘ Î”Î™Î‘ÎœÎ•Î¡Î™Î£ÎœÎ‘Î¤Î‘**
```typescript
// Î”Î¿Î¼Î® Ï€Î¯Î½Î±ÎºÎ± Î±Î½Î¬Î»Ï…ÏƒÎ·Ï‚
const analysisTableStructure = {
  columns: [
    'Î‘/Î”',                    // Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚
    'ÎŸÎÎŸÎœÎ‘Î¤Î•Î Î©ÎÎ¥ÎœÎŸ',         // ÎŒÎ½Î¿Î¼Î± Î¹Î´Î¹Î¿ÎºÏ„Î®Ï„Î·
    'Î§Î™Î›Î™ÎŸÎ£Î¤Î‘ Î£Î¥ÎœÎœÎ•Î¤ÎŸÎ§Î—Î£',   // Î§Î¹Î»Î¹Î¿ÏƒÏ„Î¬ ÏƒÏ…Î¼Î¼ÎµÏ„Î¿Ï‡Î®Ï‚
    'Î”Î‘Î Î‘ÎÎ•Î£ Î•ÎÎŸÎ™ÎšÎ™Î‘Î£Î¤Î©Î',   // Î”Î±Ï€Î¬Î½ÎµÏ‚ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„ÏÎ½
    'Î”Î‘Î Î‘ÎÎ•Î£ Î™Î”Î™ÎŸÎšÎ¤Î—Î¤Î©Î',    // Î”Î±Ï€Î¬Î½ÎµÏ‚ Î¹Î´Î¹Î¿ÎºÏ„Î·Ï„ÏÎ½
    'Î Î›Î—Î¡Î©Î¤Î•ÎŸ Î ÎŸÎ£ÎŸ',         // Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ Ï€Î»Î·ÏÏ‰Ï„Î­Î¿
    'A/A'                     // Î‘ÏÎ¾Ï‰Î½ Î±ÏÎ¹Î¸Î¼ÏŒÏ‚
  ]
};
```

#### 3. **ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ Î”Î±Ï€Î±Î½ÏÎ½**
```typescript
const EXPENSE_CATEGORIES = {
  // Î“ÎµÎ½Î¹ÎºÎ­Ï‚ Î´Î±Ï€Î¬Î½ÎµÏ‚
  'cleaning': 'ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½ Î§ÏÏÏ‰Î½',
  'electricity_common': 'Î”Î•Î— ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½',
  'water_common': 'ÎÎµÏÏŒ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½',
  'garbage_collection': 'Î£Ï…Î»Î»Î¿Î³Î® Î‘Ï€Î¿ÏÏÎ¹Î¼Î¼Î¬Ï„Ï‰Î½',
  'security': 'Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î± ÎšÏ„Î¹ÏÎ¯Î¿Ï…',
  'concierge': 'ÎšÎ±Î¸Î±ÏÎ¹ÏƒÏ„Î®Ï‚/Î Ï…Î»Ï‰ÏÏŒÏ‚',
  
  // Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±Ï‚
  'elevator_maintenance': 'Î•Ï„Î®ÏƒÎ¹Î± Î£Ï…Î½Ï„Î®ÏÎ·ÏƒÎ· Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±',
  'elevator_repair': 'Î•Ï€Î¹ÏƒÎºÎµÏ…Î® Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±',
  'elevator_inspection': 'Î•Ï€Î¹Î¸ÎµÏÏÎ·ÏƒÎ· Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±',
  
  // Î˜Î­ÏÎ¼Î±Î½ÏƒÎ·
  'heating_fuel': 'Î ÎµÏ„ÏÎ­Î»Î±Î¹Î¿ Î˜Î­ÏÎ¼Î±Î½ÏƒÎ·Ï‚',
  'heating_gas': 'Î¦Ï…ÏƒÎ¹ÎºÏŒ Î‘Î­ÏÎ¹Î¿ Î˜Î­ÏÎ¼Î±Î½ÏƒÎ·Ï‚',
  'heating_maintenance': 'Î£Ï…Î½Ï„Î®ÏÎ·ÏƒÎ· ÎšÎ±Ï…ÏƒÏ„Î®ÏÎ±',
  
  // Î™Î´Î¹Î¿ÎºÏ„Î·Ï„Î­Ï‚
  'special_contribution': 'ÎˆÎºÏ„Î±ÎºÏ„Î· Î•Î¹ÏƒÏ†Î¿ÏÎ¬',
  'reserve_fund': 'Î‘Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÏŒ Î¤Î±Î¼ÎµÎ¯Î¿',
  'emergency_fund': 'Î¤Î±Î¼ÎµÎ¯Î¿ ÎˆÎºÏ„Î±ÎºÏ„Î·Ï‚ Î‘Î½Î¬Î³ÎºÎ·Ï‚'
};
```

---

## ğŸ“Š Î Î¯Î½Î±ÎºÎ±Ï‚ Î‘ÎÎ‘Î›Î¥Î£Î— ÎšÎ‘Î¤Î‘ Î”Î™Î‘ÎœÎ•Î¡Î™Î£ÎœÎ‘Î¤Î‘

### ğŸ¯ Î”Î¿Î¼Î® Î Î¯Î½Î±ÎºÎ±

ÎŸ Ï€Î¯Î½Î±ÎºÎ±Ï‚ Î±Ï€Î¿Ï„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ **12 ÏƒÏ„Î®Î»ÎµÏ‚** Ï€Î¿Ï… ÎºÎ±Î»ÏÏ€Ï„Î¿Ï…Î½ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Ï€Ï„Ï…Ï‡Î­Ï‚ Ï„Ï‰Î½ ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½:

#### ğŸ“‹ Î£Ï„Î®Î»ÎµÏ‚ Î Î¯Î½Î±ÎºÎ±

| Î£Ï„Î®Î»Î· | Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® | Î¤ÏÏ€Î¿Ï‚ Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ | Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± |
|-------|-----------|-----------------|------------|
| **Î‘/Î”** | Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚ | String | "A1", "B2", "Î“1" |
| **ÎŸÎÎŸÎœÎ‘Î¤Î•Î Î©ÎÎ¥ÎœÎŸ** | ÎŒÎ½Î¿Î¼Î± Î¹Î´Î¹Î¿ÎºÏ„Î®Ï„Î· | String | "Î“ÎµÏÏÎ³Î¹Î¿Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚" |
| **Î§Î™Î›Î™ÎŸÎ£Î¤Î‘ Î£Î¥ÎœÎœÎ•Î¤ÎŸÎ§Î—Î£** | Î§Î¹Î»Î¹Î¿ÏƒÏ„Î¬ ÏƒÏ…Î¼Î¼ÎµÏ„Î¿Ï‡Î®Ï‚ | Decimal | 95.00 |
| **Î”Î‘Î Î‘ÎÎ•Î£ Î•ÎÎŸÎ™ÎšÎ™Î‘Î£Î¤Î©Î** | ÎšÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Î± ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„ÏÎ½ | Decimal | 26.85â‚¬ |
| **Î”Î‘Î Î‘ÎÎ•Î£ Î™Î”Î™ÎŸÎšÎ¤Î—Î¤Î©Î** | ÎšÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Î± Î¹Î´Î¹Î¿ÎºÏ„Î·Ï„ÏÎ½ | Decimal | 0.00â‚¬ |
| **Î Î›Î—Î¡Î©Î¤Î•ÎŸ Î ÎŸÎ£ÎŸ** | Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ Ï€Î»Î·ÏÏ‰Ï„Î­Î¿ | Decimal | 201.02â‚¬ |
| **A/A** | Î‘ÏÎ¾Ï‰Î½ Î±ÏÎ¹Î¸Î¼ÏŒÏ‚ | Integer | 1, 2, 3... |

#### ğŸ”¢ Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Î¯

```typescript
// Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î¼ÎµÏÎ¹Î´Î¯Ï‰Î½ Î±Î½Î¬ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±
const calculateApartmentShare = (apartment, totalExpenses) => {
  const participationMills = apartment.participation_mills;
  const totalMills = 1000; // Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Ï‡Î¹Î»Î¹Î¿ÏƒÏ„Î¬ ÎºÏ„Î¹ÏÎ¯Î¿Ï…
  
  return {
    commonExpenses: (230 * participationMills) / totalMills,      // Î”.Î•.Î—.
    elevatorExpenses: (0 * participationMills) / totalMills,      // Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±Ï‚
    heatingExpenses: (1500 * participationMills) / totalMills,    // Î˜Î­ÏÎ¼Î±Î½ÏƒÎ·
    totalAmount: commonExpenses + elevatorExpenses + heatingExpenses
  };
};
```

---

## ğŸ¨ ÎšÎ±ÏÏ„Î­Î»ÎµÏ‚ Modal

### ğŸ“„ 1. Î¦ÏÎ»Î»Î¿ ÎšÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½

**Î£ÎºÎ¿Ï€ÏŒÏ‚**: Î Î±ÏÎ¿Ï…ÏƒÎ¯Î±ÏƒÎ· Ï„Î¿Ï… ÎºÏÏÎ¹Î¿Ï… ÎµÎ³Î³ÏÎ¬Ï†Î¿Ï… Î¼Îµ Ï€Î¯Î½Î±ÎºÎ± Î±Î½Î¬Î»Ï…ÏƒÎ·Ï‚

**Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬**:
- Î Î¯Î½Î±ÎºÎ±Ï‚ Î¼Îµ ÏŒÎ»Î± Ï„Î± Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î±
- Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Î¯ Î¼ÎµÏÎ¹Î´Î¯Ï‰Î½
- Î£ÏÎ½Î¿Î»Î± Î±Î½Î¬ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±
- Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î±Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ¿Ï
- Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯ÎµÏ‚ Î­ÎºÎ´Î¿ÏƒÎ·Ï‚ ÎºÎ±Î¹ Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚

### ğŸ“Š 2. Î‘Î½Î¬Î»Ï…ÏƒÎ·

**Î£ÎºÎ¿Ï€ÏŒÏ‚**: Î“ÏÎ±Ï†Î¹ÎºÎ® Ï€Î±ÏÎ¿Ï…ÏƒÎ¯Î±ÏƒÎ· ÎºÎ±Î¹ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬

**Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬**:
- Î“ÏÎ±Ï†Î®Î¼Î±Ï„Î± Ï€Î¯Ï„Î±Ï‚ (Pie Charts)
- Î“ÏÎ±Ï†Î®Î¼Î±Ï„Î± ÏÎ¬Î²Î´Ï‰Î½ (Bar Charts)
- Î‘Î½Î¬Î»Ï…ÏƒÎ· Î±Î½Î¬ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î´Î±Ï€Î±Î½ÏÎ½
- Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ ÎºÏ„Î¹ÏÎ¯Î¿Ï…
- Î ÏÎ¿Î¿Î´ÎµÏ…Ï„Î¹ÎºÎ­Ï‚ Î³ÏÎ±Î¼Î¼Î­Ï‚

### ğŸ’¾ 3. Î•Î¾Î±Î³Ï‰Î³Î®

**Î£ÎºÎ¿Ï€ÏŒÏ‚**: Î•Î¾Î±Î³Ï‰Î³Î® Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ ÏƒÎµ PDF/Excel

**Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬**:
- PDF export Î¼Îµ ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¹ÎºÎ® Î¼Î¿ÏÏ†Î®
- Excel export Î¼Îµ Î»ÎµÏ€Ï„Î¿Î¼ÎµÏÎ® Î´ÎµÎ´Î¿Î¼Î­Î½Î±
- Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î¿Î½Î¿Î¼Î±Ï„Î¿Î´Î¿ÏƒÎ¯Î± Î±ÏÏ‡ÎµÎ¯Ï‰Î½
- Î•Ï€Î¹Î»Î¿Î³Î­Ï‚ Î¼Î¿ÏÏ†Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚

---

## ğŸ”§ Backend Integration

### ğŸ“¡ API Endpoints

```typescript
// Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½
POST /api/financial/common-expenses/calculate/
{
  building_id: number,
  include_reserve_fund: boolean,
  period_start_date?: string,
  period_end_date?: string
}

// Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï†ÏÎ»Î»Î¿Ï…
POST /api/financial/common-expenses/save/
{
  building_id: number,
  shares: ApartmentShare[],
  total_expenses: number,
  period: string
}

// Î•ÎºÎ´Î®Î»Ï‰ÏƒÎ· ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½
POST /api/financial/common-expenses/issue/
{
  building_id: number,
  period: string
}
```

### ğŸ—„ï¸ Models

```python
# backend/financial/models.py

class CommonExpensePeriod(models.Model):
    """Î ÎµÏÎ¯Î¿Î´Î¿Ï‚ ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Ï‰Î½"""
    building = models.ForeignKey(Building, on_delete=models.CASCADE)
    period_name = models.CharField(max_length=100)
    start_date = models.DateField()
    end_date = models.DateField()
    is_issued = models.BooleanField(default=False)

class ApartmentShare(models.Model):
    """ÎœÎµÏÎ¯Î´Î¹Î¿ Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚"""
    period = models.ForeignKey(CommonExpensePeriod, on_delete=models.CASCADE)
    apartment = models.ForeignKey(Apartment, on_delete=models.CASCADE)
    total_amount = models.DecimalField(max_digits=10, decimal_places=2)
    breakdown = models.JSONField(default=dict)  # Î›ÎµÏ€Ï„Î¿Î¼ÎµÏÎ®Ï‚ Î±Î½Î¬Î»Ï…ÏƒÎ·
```

---

## ğŸ¯ Î§ÏÎ®ÏƒÎ· ÎºÎ±Î¹ Î¡Î¿Î® Î•ÏÎ³Î±ÏƒÎ¯Î±Ï‚

### ğŸ“‹ Î¤Ï…Ï€Î¹ÎºÎ® Î¡Î¿Î® Î•ÏÎ³Î±ÏƒÎ¯Î±Ï‚

1. **Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·**: Î§ÏÎ®ÏƒÏ„Î·Ï‚ ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹ ÎºÏ„Î¯ÏÎ¹Î¿ ÎºÎ±Î¹ Ï€ÎµÏÎ¯Î¿Î´Î¿
2. **Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚**: Î£ÏÏƒÏ„Î·Î¼Î± Ï…Ï€Î¿Î»Î¿Î³Î¯Î¶ÎµÎ¹ Î¼ÎµÏÎ¯Î´Î¹Î± Î±Î½Î¬ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±
3. **Î ÏÎ¿Î²Î¿Î»Î®**: Modal ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ Ï€Î¯Î½Î±ÎºÎ± Î±Î½Î¬Î»Ï…ÏƒÎ·Ï‚
4. **Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·**: Î§ÏÎ®ÏƒÏ„Î·Ï‚ ÎµÎ»Î­Î³Ï‡ÎµÎ¹ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿ÏÏ‚
5. **Î•ÎºÎ´Î®Î»Ï‰ÏƒÎ·**: Î£ÏÏƒÏ„Î·Î¼Î± ÎµÎºÎ´Î¯Î´ÎµÎ¹ ÎºÎ¿Î¹Î½Î¿Ï‡ÏÎ®ÏƒÏ„Î±
6. **Î•Î¾Î±Î³Ï‰Î³Î®**: PDF/Excel Î³Î¹Î± Î´Î¹Î±Î½Î¿Î¼Î®

### ğŸ” Validation Rules

```typescript
const validationRules = {
  // Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Ï‡Î¹Î»Î¹Î¿ÏƒÏ„Î¬ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ 1000
  totalMills: (mills: number[]) => mills.reduce((a, b) => a + b, 0) === 1000,
  
  // Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î´Î±Ï€Î¬Î½ÎµÏ‚ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï„Î±Î¹ÏÎ¹Î¬Î¶Î¿Ï…Î½
  totalExpenses: (calculated: number, expected: number) => 
    Math.abs(calculated - expected) < 0.01,
  
  // ÎŒÎ»Î± Ï„Î± Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡Î¿Ï…Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î±
  allApartmentsHaveData: (shares: any[]) => 
    shares.every(share => share.total_amount > 0)
};
```

---

## ğŸ¨ Styling ÎºÎ±Î¹ UI/UX

### ğŸ¨ Î§ÏÏ‰Î¼Î±Ï„Î¹ÎºÎ® Î£Ï‡Î­Î´Î¹Î¿

```css
/* Î§ÏÏÎ¼Î±Ï„Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¹ÏÎ½ Î´Î±Ï€Î±Î½ÏÎ½ */
:root {
  --common-expenses: #3B82F6;      /* ÎœÏ€Î»Îµ - ÎšÎ¿Î¹Î½ÏŒÏ‡ÏÎ·ÏƒÏ„Î± */
  --elevator-expenses: #10B981;    /* Î ÏÎ¬ÏƒÎ¹Î½Î¿ - Î‘Î½ÎµÎ»ÎºÏ…ÏƒÏ„Î®ÏÎ±Ï‚ */
  --heating-expenses: #F59E0B;     /* Î Î¿ÏÏ„Î¿ÎºÎ±Î»Î¯ - Î˜Î­ÏÎ¼Î±Î½ÏƒÎ· */
  --reserve-fund: #6B7280;         /* Î“ÎºÏÎ¹ - Î‘Ï€Î¿Î¸ÎµÎ¼Î±Ï„Î¹ÎºÏŒ */
  --management-fee: #EC4899;       /* Î¡Î¿Î¶ - Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· */
}
```

### ğŸ“± Responsive Design

- **Desktop**: Î Î»Î®ÏÎ·Ï‚ Ï€Î¯Î½Î±ÎºÎ±Ï‚ Î¼Îµ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ ÏƒÏ„Î®Î»ÎµÏ‚
- **Tablet**: Î£Ï…Î¼Ï€Î¹ÎµÏƒÎ¼Î­Î½Î¿Ï‚ Ï€Î¯Î½Î±ÎºÎ±Ï‚ Î¼Îµ ÎºÏÏÎ¹ÎµÏ‚ ÏƒÏ„Î®Î»ÎµÏ‚
- **Mobile**: ÎšÎ±ÏÏ„Î­Î»ÎµÏ‚ Î±Î½Î¬ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±

---

## ğŸ”§ Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿Î³Î­Ï‚ ÎºÎ±Î¹ Î•Ï€ÎµÎºÏ„Î¬ÏƒÎµÎ¹Ï‚

### ğŸ¯ Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½ÎµÏ‚ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚

```typescript
// Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Î±Ï‚ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚ Î´Î±Ï€Î±Î½ÏÎ½
const CUSTOM_EXPENSE_CATEGORIES = {
  'smart_home': 'ÎˆÎ¾Ï…Ï€Î½Î± Î£Ï…ÏƒÏ„Î®Î¼Î±Ï„Î±',
  'renewable_energy': 'Î‘Î½Î±Î½ÎµÏÏƒÎ¹Î¼ÎµÏ‚ Î Î·Î³Î­Ï‚',
  'accessibility': 'Î ÏÎ¿ÏƒÎ²Î±ÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±'
};
```

### ğŸ“Š Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î± Î“ÏÎ±Ï†Î®Î¼Î±Ï„Î±

```typescript
// Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Î¿Ï… Ï„ÏÏ€Î¿Ï… Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î¿Ï‚
const CUSTOM_CHART_TYPES = {
  'trend_analysis': 'Î‘Î½Î¬Î»Ï…ÏƒÎ· Î¤Î¬ÏƒÎµÏ‰Î½',
  'comparison_chart': 'Î£Ï…Î³ÎºÏÎ¹Ï„Î¹ÎºÎ® Î‘Î½Î¬Î»Ï…ÏƒÎ·',
  'forecast_chart': 'Î ÏÏŒÎ³Î½Ï‰ÏƒÎ· Î”Î±Ï€Î±Î½ÏÎ½'
};
```

---

## ğŸ› Troubleshooting

### ğŸ” Î£Ï…Ï‡Î½Î¬ Î ÏÎ¿Î²Î»Î®Î¼Î±Ï„Î±

1. **Î£Ï†Î¬Î»Î¼Î± Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏÎ½**
   - ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï‡Î¹Î»Î¹Î¿ÏƒÏ„ÏÎ½ ÏƒÏ…Î¼Î¼ÎµÏ„Î¿Ï‡Î®Ï‚
   - Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î´Î±Ï€Î±Î½ÏÎ½
   - Validation Ï„Ï‰Î½ Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½

2. **Î ÏÏŒÎ²Î»Î·Î¼Î± PDF export**
   - ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚ html2canvas
   - Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î¼ÎµÎ³Î­Î¸Î¿Ï…Ï‚ Ï€Î¯Î½Î±ÎºÎ±
   - Debug rendering issues

3. **Î£Ï†Î¬Î»Î¼Î± Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½**
   - ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ tenant isolation
   - Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· building permissions
   - Validation API responses

### ğŸ”§ Debug Tools

```typescript
// Debug helper functions
const debugHelpers = {
  logCalculationSteps: (state) => console.log('Calculation steps:', state),
  validateData: (shares) => console.log('Data validation:', shares),
  exportDebugInfo: () => console.log('Export debug info')
};
```

---

## ğŸ“š Î Î·Î³Î­Ï‚ ÎºÎ±Î¹ Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚

### ğŸ“– Documentation
- [Django Tenants Documentation](https://django-tenants.readthedocs.io/)
- [React Hook Form](https://react-hook-form.com/)
- [Recharts Documentation](https://recharts.org/)
- [jsPDF Documentation](https://artskydj.github.io/jsPDF/docs/)

### ğŸ”— Related Components
- `ExpenseBreakdownSection.tsx` - Î‘Î½Î¬Î»Ï…ÏƒÎ· Î´Î±Ï€Î±Î½ÏÎ½
- `CalculatorWizard.tsx` - Wizard Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏÎ½
- `ResultsStep.tsx` - Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±
- `CommonExpenseCalculator.tsx` - ÎšÏÏÎ¹Î¿ calculator

---

## ğŸ¯ ÎœÎµÎ»Î»Î¿Î½Ï„Î¹ÎºÎ­Ï‚ Î’ÎµÎ»Ï„Î¹ÏÏƒÎµÎ¹Ï‚

### ğŸš€ Î ÏÎ¿Ï„ÎµÎ¹Î½ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î•Ï€ÎµÎºÏ„Î¬ÏƒÎµÎ¹Ï‚

1. **Real-time Updates**
   - WebSocket integration Î³Î¹Î± live updates
   - Auto-refresh Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½

2. **Advanced Analytics**
   - Machine learning Î³Î¹Î± Ï€ÏÏŒÎ³Î½Ï‰ÏƒÎ· Î´Î±Ï€Î±Î½ÏÎ½
   - Trend analysis

3. **Enhanced Export**
   - Multiple format support (Word, PowerPoint)
   - Custom templates

4. **Mobile App**
   - Native mobile application
   - Offline functionality

---

*Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·: Î™Î±Î½Î¿Ï…Î¬ÏÎ¹Î¿Ï‚ 2025*
*ÎˆÎºÎ´Î¿ÏƒÎ·: 1.0.0*
