# 📊 ΠΡΟΤΕΙΝΟΜΕΝΗ ΔΟΜΗ ΚΑΤΗΓΟΡΙΩΝ ΔΑΠΑΝΩΝ

**Ημερομηνία**: 19 Νοεμβρίου 2025  
**Σκοπός**: Ξεκάθαρη ιεραρχική δομή για διευκόλυνση χρηστών

---

## 🎯 ΦΙΛΟΣΟΦΙΑ ΣΧΕΔΙΑΣΜΟΥ

### Βασικές Αρχές:
1. **Πρώτο Επίπεδο**: Ομαδοποίηση με βάση ΠΛΗΡΩΤΗ (Owner/Resident/Shared)
2. **Δεύτερο Επίπεδο**: Λειτουργική κατηγορία (π.χ. Ανελκυστήρας, Θέρμανση)
3. **Τρίτο Επίπεδο**: Συγκεκριμένη δαπάνη

### Πλεονεκτήματα:
- ✅ Άμεση κατανόηση: "Ποιος πληρώνει;"
- ✅ Εύκολη φιλτράρισμα: "Δείξε μου μόνο τις δαπάνες ιδιοκτητών"
- ✅ Σαφής διαχωρισμός: Όχι μπέρδεμα μεταξύ ενοίκου-ιδιοκτήτη
- ✅ Scalable: Εύκολη προσθήκη νέων κατηγοριών

---

## 🏗️ ΠΡΟΤΕΙΝΟΜΕΝΗ ΔΟΜΗ

---

## 🟢 ΔΑΠΑΝΕΣ ΕΝΟΙΚΩΝ (RESIDENT EXPENSES)
**Περιγραφή**: Τακτικές δαπάνες λειτουργίας και συντήρησης  
**Ποιος πληρώνει**: Ένοικος (ή Ιδιοκτήτης αν ιδιοκατοικείται)

---

### 📋 1. ΠΑΓΙΕΣ ΔΑΠΑΝΕΣ ΚΟΙΝΟΧΡΗΣΤΩΝ
**Κωδικός Κατηγορίας**: `regular_common_expenses`

#### Υπάρχουσες Κατηγορίες:
- `cleaning` - Καθαρισμός Κοινοχρήστων Χώρων
- `electricity_common` - ΔΕΗ Κοινοχρήστων
- `water_common` - Νερό Κοινοχρήστων
- `garbage_collection` - Συλλογή Απορριμμάτων
- `security` - Ασφάλεια Κτιρίου (Φύλαξη)
- `concierge` - Συνεργείο Καθαρισμού
- `deh_maintenance_fee` - Τέλος Συντήρησης ΔΕΗ
- `water_sewage_fee` - Τέλος Αποχέτευσης

---

### 🔼 2. ΑΝΕΛΚΥΣΤΗΡΑΣ
**Κωδικός Κατηγορίας**: `elevator_expenses`

#### Υπάρχουσες Κατηγορίες:
- `elevator_maintenance` - Ετήσια Συντήρηση Ανελκυστήρα
- `elevator_inspection` - Επιθεώρηση Ανελκυστήρα
- `elevator_emergency` - Εγκλωβισμός Ανελκυστήρα (Έκτακτη Επέμβαση)

---

### 🔥 3. ΘΕΡΜΑΝΣΗ
**Κωδικός Κατηγορίας**: `heating_expenses`

#### Υπάρχουσες Κατηγορίες:
- `heating_fuel` - Πετρέλαιο Θέρμανσης
- `heating_gas` - Φυσικό Αέριο Θέρμανσης
- `heating_maintenance` - Συντήρηση Καυστήρα
- `heating_inspection` - Επιθεώρηση Θερμαντικών

---

### ⚡ 4. ΗΛΕΚΤΡΙΚΑ
**Κωδικός Κατηγορίας**: `electrical_expenses`

#### Υπάρχουσες Κατηγορίες:
- `electrical_maintenance` - Συντήρηση Ηλεκτρικών
- `lighting_common` - Φωτισμός Κοινοχρήστων
- `intercom_system` - Σύστημα Εσωτερικής Επικοινωνίας
- `generator_maintenance` - Συντήρηση Γεννήτριας

---

### 💧 5. ΥΔΡΑΥΛΙΚΑ
**Κωδικός Κατηγορίας**: `plumbing_expenses`

#### Υπάρχουσες Κατηγορίες:
- `plumbing_maintenance` - Συντήρηση Υδραυλικών
- `water_tank_cleaning` - Καθαρισμός Δεξαμενής Νερού
- `water_tank_maintenance` - Συντήρηση Δεξαμενής Νερού

---

### 🌳 6. ΕΞΩΤΕΡΙΚΟΙ ΧΩΡΟΙ
**Κωδικός Κατηγορίας**: `outdoor_expenses`

#### Υπάρχουσες Κατηγορίες:
- `garden_maintenance` - Συντήρηση Κήπου
- `tree_trimming` - Κλάδεμα Δέντρων
- `parking_maintenance` - Συντήρηση Χώρων Στάθμευσης
- `entrance_maintenance` - Συντήρηση Εισόδου
- `snow_removal` - Καθαρισμός Χιονιού

---

### 🔒 7. ΑΣΦΑΛΕΙΑ & ΣΥΝΤΗΡΗΣΗ
**Κωδικός Κατηγορίας**: `security_maintenance`

#### Υπάρχουσες Κατηγορίες:
- `fire_extinguishers` - Πυροσβεστήρες (Ανανέωση)
- `pest_control` - Εντομοκτονία

---

### 📝 8. ΔΙΑΧΕΙΡΙΣΗ
**Κωδικός Κατηγορίας**: `management_expenses`

#### Υπάρχουσες Κατηγορίες:
- `management_fees` - Διοικητικά Έξοδα / Κόστος Διαχείρισης

---

### 🔧 9. ΛΟΙΠΕΣ ΤΑΚΤΙΚΕΣ ΔΑΠΑΝΕΣ
**Κωδικός Κατηγορίας**: `other_regular`

#### Υπάρχουσες Κατηγορίες:
- `utilities_other` - Άλλες Κοινόχρηστες Υπηρεσίες

---

## 🔴 ΔΑΠΑΝΕΣ ΙΔΙΟΚΤΗΤΩΝ (OWNER EXPENSES)
**Περιγραφή**: Κεφαλαιουχικές δαπάνες, επισκευές, αναβαθμίσεις, αποθεματικό  
**Ποιος πληρώνει**: ΜΟΝΟ Ιδιοκτήτες (ακόμα και αν το διαμέρισμα ενοικιάζεται)

---

### 🏢 1. ΚΤΙΡΙΟ & ΔΟΜΗ
**Κωδικός Κατηγορίας**: `building_structure`

#### Υπάρχουσες Κατηγορίες:
- `building_insurance` - Ασφάλιση Κτιρίου
- `building_maintenance` - Συντήρηση Κτιρίου
- `common_areas_renovation` - Ανακαίνιση Κοινοχρήστων
- `roof_maintenance` - Συντήρηση Στέγης
- `roof_repair` - Επισκευή Στέγης
- `facade_maintenance` - Συντήρηση Πρόσοψης
- `facade_repair` - Επισκευή Πρόσοψης
- `painting_exterior` - Βαψίματα Εξωτερικών
- `staircase_repair` - Επισκευή Σκάλας

---

### 🏗️ 2. ΕΡΓΑ ΥΠΟΔΟΜΗΣ ⭐ [ΝΕΑ ΚΑΤΗΓΟΡΙΑ]
**Κωδικός Κατηγορίας**: `infrastructure_projects`
**Περιγραφή**: Μεγάλα έργα αναβάθμισης και βελτίωσης υποδομής

#### Προτεινόμενες Νέες Κατηγορίες:
- `infrastructure_project` - Έργο Υποδομής (Γενικό) ⭐ **ΝΕΟ**
- `structural_upgrade` - Δομική Αναβάθμιση ⭐ **ΝΕΟ**
- `foundation_repair` - Επισκευή Θεμελίων ⭐ **ΝΕΟ**
- `waterproofing` - Υδρομόνωση ⭐ **ΝΕΟ**
- `drainage_system` - Σύστημα Αποστράγγισης ⭐ **ΝΕΟ**
- `retaining_wall` - Αντιστήριξη Τοιχίων ⭐ **ΝΕΟ**

#### Υπάρχουσες Κατηγορίες που ταιριάζουν:
- `project` - Έργα Πολυκατοικίας (από Projects module)
- `maintenance_project` - Έργα Συντήρησης & Βελτίωσης

---

### 🔼 3. ΑΝΕΛΚΥΣΤΗΡΑΣ - ΜΕΓΑΛΕΣ ΕΠΙΣΚΕΥΕΣ
**Κωδικός Κατηγορίας**: `elevator_major_works`

#### Υπάρχουσες Κατηγορίες:
- `elevator_modernization` - Αναβάθμιση/Εκσυγχρονισμός Ανελκυστήρα

#### Προτεινόμενες Νέες:
- `elevator_replacement` - Αντικατάσταση Ανελκυστήρα ⭐ **ΝΕΟ**
- `elevator_shaft_repair` - Επισκευή Φρεατίου ⭐ **ΝΕΟ**

---

### 🔥 4. ΘΕΡΜΑΝΣΗ - ΜΕΓΑΛΕΣ ΕΠΙΣΚΕΥΕΣ
**Κωδικός Κατηγορίας**: `heating_major_works`

#### Υπάρχουσες Κατηγορίες:
- `heating_modernization` - Αναβάθμιση Συστήματος Θέρμανσης

#### Προτεινόμενες Νέες:
- `boiler_replacement` - Αντικατάσταση Λέβητα ⭐ **ΝΕΟ**
- `heating_system_overhaul` - Πλήρης Ανακατασκευή Θέρμανσης ⭐ **ΝΕΟ**
- `burner_replacement` - Αντικατάσταση Καυστήρα ⭐ **ΝΕΟ**

---

### ⚡ 5. ΗΛΕΚΤΡΙΚΑ - ΕΠΙΣΚΕΥΕΣ & ΑΝΑΒΑΘΜΙΣΕΙΣ
**Κωδικός Κατηγορίας**: `electrical_major_works`

#### Υπάρχουσες Κατηγορίες:
- `electrical_repair` - Επισκευή Ηλεκτρικών
- `electrical_upgrade` - Αναβάθμιση Ηλεκτρικών
- `generator_repair` - Επισκευή Γεννήτριας

#### Προτεινόμενες Νέες:
- `electrical_rewiring` - Πλήρης Ανακατασκευή Ηλεκτρικών ⭐ **ΝΕΟ**
- `power_upgrade` - Αύξηση Ισχύος ⭐ **ΝΕΟ**
- `electrical_panel_upgrade` - Αναβάθμιση Πίνακα ⭐ **ΝΕΟ**

---

### 💧 6. ΥΔΡΑΥΛΙΚΑ - ΕΠΙΣΚΕΥΕΣ & ΑΝΤΙΚΑΤΑΣΤΑΣΕΙΣ
**Κωδικός Κατηγορίας**: `plumbing_major_works`

#### Υπάρχουσες Κατηγορίες:
- `plumbing_repair` - Επισκευή Υδραυλικών
- `sewage_system` - Σύστημα Αποχέτευσης

#### Προτεινόμενες Νέες:
- `pipe_replacement` - Αντικατάσταση Σωληνώσεων ⭐ **ΝΕΟ**
- `water_tank_replacement` - Αντικατάσταση Δεξαμενής Νερού ⭐ **ΝΕΟ**
- `plumbing_system_overhaul` - Πλήρης Ανακατασκευή Υδραυλικών ⭐ **ΝΕΟ**
- `sewage_repair` - Επισκευή Αποχέτευσης ⭐ **ΝΕΟ**

---

### 🚨 7. ΕΚΤΑΚΤΑ & ΖΗΜΙΕΣ
**Κωδικός Κατηγορίας**: `emergency_damages`

#### Υπάρχουσες Κατηγορίες:
- `emergency_repair` - Έκτακτη Επισκευή
- `storm_damage` - Ζημιές από Κακοκαιρία
- `flood_damage` - Ζημιές από Πλημμύρα
- `fire_damage` - Ζημιές από Πυρκαγιά
- `earthquake_damage` - Ζημιές από Σεισμό
- `vandalism_repair` - Επισκευή Βανδαλισμών

---

### 🔧 8. ΕΙΔΙΚΕΣ ΕΠΙΣΚΕΥΕΣ
**Κωδικός Κατηγορίας**: `specialized_repairs`

#### Υπάρχουσες Κατηγορίες:
- `glass_repair` - Επισκευή Γυαλιών
- `door_repair` - Επισκευή Πόρτας
- `window_repair` - Επισκευή Παραθύρων
- `balcony_repair` - Επισκευή Μπαλκονιού

---

### 🔒 9. ΣΥΣΤΗΜΑΤΑ ΑΣΦΑΛΕΙΑΣ (Εγκατάσταση)
**Κωδικός Κατηγορίας**: `security_installations`

#### Υπάρχουσες Κατηγορίες:
- `security_system` - Σύστημα Ασφάλειας (Εγκατάσταση)
- `cctv_installation` - Εγκατάσταση CCTV
- `access_control` - Σύστημα Ελέγχου Πρόσβασης
- `fire_alarm` - Σύστημα Πυρασφάλειας

---

### ⚡ 10. ΕΝΕΡΓΕΙΑΚΕΣ ΑΝΑΒΑΘΜΙΣΕΙΣ
**Κωδικός Κατηγορίας**: `energy_upgrades`

#### Υπάρχουσες Κατηγορίες:
- `energy_upgrade` - Ενεργειακή Αναβάθμιση
- `insulation_work` - Θερμομόνωση
- `solar_panel_installation` - Εγκατάσταση Φωτοβολταϊκών
- `led_lighting` - Αντικατάσταση με LED
- `smart_systems` - Έξυπνα Συστήματα

---

### 🧪 11. ΕΙΔΙΚΕΣ ΕΡΓΑΣΙΕΣ
**Κωδικός Κατηγορίας**: `specialized_work`

#### Υπάρχουσες Κατηγορίες:
- `asbestos_removal` - Αφαίρεση Ασβέστη
- `lead_paint_removal` - Αφαίρεση Μολύβδου
- `mold_removal` - Αφαίρεση Μούχλας

---

### 📝 12. ΔΙΟΙΚΗΤΙΚΑ & ΝΟΜΙΚΑ
**Κωδικός Κατηγορίας**: `administrative_legal`

#### Υπάρχουσες Κατηγορίες:
- `legal_fees` - Δικαστικά Έξοδα
- `notary_fees` - Συμβολαιογραφικά Έξοδα
- `surveyor_fees` - Εκτιμητής
- `architect_fees` - Αρχιτέκτονας
- `engineer_fees` - Μηχανικός
- `accounting_fees` - Λογιστικά Έξοδα
- `consulting_fees` - Εργασίες Συμβούλου
- `permits_licenses` - Άδειες & Αποδοχές
- `taxes_fees` - Φόροι & Τέλη

---

### 💰 13. ΟΙΚΟΝΟΜΙΚΑ (Αποθεματικό & Ταμεία)
**Κωδικός Κατηγορίας**: `financial_reserves`

#### Υπάρχουσες Κατηγορίες:
- `reserve_fund` - Αποθεματικό Ταμείο
- `emergency_fund` - Ταμείο Έκτακτης Ανάγκης
- `renovation_fund` - Ταμείο Ανακαίνισης
- `special_contribution` - Έκτακτη Εισφορά

---

## 🔵 ΚΟΙΝΕΣ ΔΑΠΑΝΕΣ (SHARED EXPENSES)
**Περιγραφή**: Δαπάνες που μπορεί να αφορούν είτε ενοίκους είτε ιδιοκτήτες  
**Ποιος πληρώνει**: Εξαρτάται από το μέγεθος/φύση της εργασίας

---

### 🔧 1. ΕΠΙΣΚΕΥΕΣ (Μικρές vs Μεγάλες)
**Κωδικός Κατηγορίας**: `shared_repairs`

#### Υπάρχουσες Κατηγορίες:
- `elevator_repair` - Επισκευή Ανελκυστήρα (μικρή → ένοικος, μεγάλη → ιδιοκτήτης)
- `heating_repair` - Επισκευή Θερμαντικών (μικρή → ένοικος, αντικατάσταση → ιδιοκτήτης)
- `painting_interior` - Βαψίματα Εσωτερικών (μικρά → ένοικος, ανακαίνιση → ιδιοκτήτης)
- `locksmith` - Κλειδαράς (κοινόχρηστα → ένοικος, θύρες → ιδιοκτήτης)

---

### 🔧 2. ΔΙΑΦΟΡΕΣ ΔΑΠΑΝΕΣ
**Κωδικός Κατηγορίας**: `miscellaneous_shared`

#### Υπάρχουσες Κατηγορίες:
- `miscellaneous` - Διάφορες Δαπάνες
- `other` - Άλλο

---

## 📊 ΣΥΝΟΨΗ ΑΡΙΘΜΩΝ

### Τρέχουσες Κατηγορίες:
- **Υπάρχουσες**: 79 κατηγορίες
- **Δαπάνες Ενοίκων**: 26 κατηγορίες
- **Δαπάνες Ιδιοκτητών**: 47 κατηγορίες
- **Κοινές Δαπάνες**: 6 κατηγορίες

### Προτεινόμενες Νέες Κατηγορίες:
- **Έργα Υποδομής**: 6 νέες κατηγορίες
- **Ανελκυστήρας**: 2 νέες κατηγορίες
- **Θέρμανση**: 3 νέες κατηγορίες
- **Ηλεκτρικά**: 3 νέες κατηγορίες
- **Υδραυλικά**: 4 νέες κατηγορίες
- **ΣΥΝΟΛΟ**: +18 νέες κατηγορίες

### Τελική Δομή:
- **Συνολικές Κατηγορίες**: 97 (79 + 18)
- **Κύριες Ομάδες**: 3 (Ένοικοι, Ιδιοκτήτες, Κοινές)
- **Λειτουργικές Υποκατηγορίες**: 26 ομάδες

---

## 🎨 ΠΡΟΤΕΙΝΟΜΕΝΗ ΟΠΤΙΚΗ ΠΑΡΟΥΣΙΑΣΗ

### Στο Φύλλο Κοινοχρήστων:

```
┌─────────────────────────────────────────────────────────────┐
│           🧮 ΑΝΑΛΥΣΗ ΔΑΠΑΝΩΝ ΠΟΛΥΚΑΤΟΙΚΙΑΣ                   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 🟢 ΔΑΠΑΝΕΣ ΕΝΟΙΚΩΝ                                           │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│ 📋 Πάγιες Δαπάνες Κοινοχρήστων                               │
│   1. Καθαρισμός Κοινοχρήστων           50,00 €               │
│   2. ΔΕΗ Κοινοχρήστων                  120,00 €              │
│   3. Νερό Κοινοχρήστων                 30,00 €               │
│                                        ───────               │
│   Σύνολο:                              200,00 €              │
│                                                               │
│ 🔼 Ανελκυστήρας                                               │
│   4. Ετήσια Συντήρηση                  180,00 €              │
│   5. Επιθεώρηση                        50,00 €               │
│                                        ───────               │
│   Σύνολο:                              230,00 €              │
│                                                               │
│ 🔥 Θέρμανση                                                   │
│   6. Φυσικό Αέριο                      500,00 €              │
│                                        ───────               │
│   Σύνολο:                              500,00 €              │
│                                                               │
│ 📝 Διαχείριση                                                 │
│   7. Κόστος Διαχείρισης                0,00 €                │
│                                        ───────               │
│   Σύνολο:                              0,00 €                │
│                                                               │
│ ═══════════════════════════════════════════════              │
│ 🟢 ΣΥΝΟΛΟ ΔΑΠΑΝΩΝ ΕΝΟΙΚΩΝ              930,00 €              │
│ ═══════════════════════════════════════════════              │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 🔴 ΔΑΠΑΝΕΣ ΙΔΙΟΚΤΗΤΩΝ                                        │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│ 💰 Οικονομικά                                                 │
│   1. Αποθεματικό Ταμείο                0,00 €                │
│                                        ───────               │
│   Σύνολο:                              0,00 €                │
│                                                               │
│ 🏗️ Έργα Υποδομής                                             │
│   (Δεν υπάρχουν τον τρέχοντα μήνα)                           │
│                                        ───────               │
│   Σύνολο:                              0,00 €                │
│                                                               │
│ ═══════════════════════════════════════════════              │
│ 🔴 ΣΥΝΟΛΟ ΔΑΠΑΝΩΝ ΙΔΙΟΚΤΗΤΩΝ           0,00 €                │
│ ═══════════════════════════════════════════════              │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 📊 Παλαιότερες Οφειλές                 0,00 €                │
└─────────────────────────────────────────────────────────────┘

┌═════════════════════════════════════════════════════════════┐
│ Σ  ΓΕΝΙΚΟ ΣΥΝΟΛΟ                       930,00 €              │
└═════════════════════════════════════════════════════════════┘
```

---

## 💡 ΠΛΕΟΝΕΚΤΗΜΑΤΑ ΝΕΑΣ ΔΟΜΗΣ

### 1. **Ξεκάθαρος Διαχωρισμός**
- ✅ Άμεση κατανόηση: "Αυτές οι δαπάνες είναι για ιδιοκτήτες"
- ✅ Όχι σύγκριση: Ο ενοικιαστής βλέπει μόνο τι πληρώνει

### 2. **Διευκόλυνση Χρήστη**
- ✅ Κατά την **εισαγωγή δαπάνης**: "Θέλω να προσθέσω Έργο Υποδομής" → Επιλέγει κατηγορία "Ιδιοκτήτες" → Βλέπει μόνο σχετικές επιλογές
- ✅ Κατά την **εμφάνιση**: Βλέπει ομαδοποιημένα τα ποσά

### 3. **Scalability**
- ✅ Εύκολη προσθήκη νέων κατηγοριών
- ✅ Δεν χάνεται η δομή

### 4. **Compliance**
- ✅ Σύμφωνα με ελληνική νομοθεσία
- ✅ Σαφής διαχωρισμός ευθυνών

---

## 🚀 ΠΡΟΤΕΙΝΟΜΕΝΑ ΕΠΟΜΕΝΑ ΒΗΜΑΤΑ

### Βήμα 1: Επιβεβαίωση Δομής
- [ ] Review προτεινόμενης δομής
- [ ] Προσθήκη/Αφαίρεση κατηγοριών αν χρειάζεται
- [ ] Έγκριση από χρήστη

### Βήμα 2: Backend Implementation
- [ ] Δημιουργία `CATEGORY_HIERARCHY` dictionary
- [ ] Προσθήκη νέων κατηγοριών στο `EXPENSE_CATEGORIES`
- [ ] Update `EXPENSE_CATEGORY_DEFAULTS` mapping
- [ ] Helper functions για ομαδοποίηση

### Βήμα 3: Frontend Implementation
- [ ] Update `TraditionalViewTab.tsx` για ομαδοποιημένη εμφάνιση
- [ ] Collapsible sections για κάθε κύρια κατηγορία
- [ ] Συνολικά ανά ομάδα

### Βήμα 4: Testing & Validation
- [ ] Unit tests
- [ ] Integration tests
- [ ] User acceptance testing

### Βήμα 5: Documentation
- [ ] Update οδηγού χρήστη
- [ ] Inline documentation

---

## ❓ ΕΡΩΤΗΣΕΙΣ ΓΙΑ ΣΥΖΗΤΗΣΗ

1. **Νέες Κατηγορίες**: Συμφωνείτε με τις προτεινόμενες 18 νέες κατηγορίες;
2. **"Έργο Υποδομής"**: Είναι αρκετά συγκεκριμένο ή χρειάζεται περισσότερη ανάλυση;
3. **Ομαδοποίηση**: Η προτεινόμενη δομή καλύπτει τις ανάγκες σας;
4. **Collapsible UI**: Θέλετε όλες οι ομάδες να είναι αναδιπλούμενες (collapsible);
5. **Προεπιλεγμένη Εμφάνιση**: Ποιες ομάδες να είναι expanded by default;

---

**Περιμένω τα σχόλιά σας για να προχωρήσουμε στην υλοποίηση!** 🚀

