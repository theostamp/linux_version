<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Payment Flow - Î‘ÏÎ±Ï‡ÏÎ²Î·Ï‚ 12</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            color: #1f2937;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .test-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 24px;
        }
        .header {
            background: #1e40af;
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 24px;
        }
        .test-link {
            display: inline-block;
            padding: 12px 24px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 8px;
            transition: background 0.2s;
        }
        .test-link:hover {
            background: #2563eb;
        }
        .test-link.urgent {
            background: #ea580c;
        }
        .test-link.urgent:hover {
            background: #dc2626;
        }
        .test-link.bulk {
            background: #16a34a;
        }
        .test-link.bulk:hover {
            background: #15803d;
        }
        .feature-list {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        .feature-list h4 {
            color: #0369a1;
            margin-top: 0;
        }
        .feature-item {
            margin: 8px 0;
            padding-left: 16px;
            position: relative;
        }
        .feature-item::before {
            content: "âœ…";
            position: absolute;
            left: 0;
        }
        code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
        .url-example {
            background: #374151;
            color: #f3f4f6;
            padding: 12px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”— Test Payment Flow Integration</h1>
            <p>Î”Î¿ÎºÎ¹Î¼Î® Ï„Î·Ï‚ Î½Î­Î±Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚ "Î Î»Î·ÏÏ‰Î¼Î® Î¤ÏÏÎ±" Î¼Îµ Ï€ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î·ÏÏ‰Î¼Î­Î½Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±</p>
        </div>

        <!-- Test Links Section -->
        <div class="test-section">
            <h2>ğŸ§ª Test Links Î³Î¹Î± Î”Î¿ÎºÎ¹Î¼Î®</h2>
            <p>ÎšÎ¬Î½Ï„Îµ ÎºÎ»Î¹Îº ÏƒÏ„Î¿Ï…Ï‚ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÏƒÏ…Î½Î´Î­ÏƒÎ¼Î¿Ï…Ï‚ Î³Î¹Î± Î½Î± Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÏ„Îµ Ï„Î· Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÏŒÏ„Î·Ï„Î±:</p>
            
            <h3>Individual Payment Tests:</h3>
            <a href="http://demo.localhost:8080/financial?tab=payments&building=3&action=new_payment&apartment=%CE%912&auto_open=true" class="test-link">
                ğŸ’³ Î Î»Î·ÏÏ‰Î¼Î® Î”Î¹Î±Î¼. Î‘2 (Î•Î»Î­Î½Î· Î”Î·Î¼Î·Ï„ÏÎ¯Î¿Ï…)
            </a>
            <a href="http://demo.localhost:8080/financial?tab=payments&building=3&action=quick_payment&apartment=%CE%9311&auto_open=true" class="test-link urgent">
                ğŸ”¥ Î†Î¼ÎµÏƒÎ· Î Î»Î·ÏÏ‰Î¼Î® Î”Î¹Î±Î¼. Î“1 (Î£Î¿Ï†Î¯Î± ÎÎ¹ÎºÎ¿Î»Î¬Î¿Ï…)
            </a>
            <a href="http://demo.localhost:8080/financial?tab=payments&building=3&action=new_payment&apartment=%CE%94%31&auto_open=true" class="test-link">
                ğŸ’³ Î Î»Î·ÏÏ‰Î¼Î® Î”Î¹Î±Î¼. Î”1 (Î§ÏÎ®ÏƒÏ„Î¿Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚)
            </a>
            
            <h3>Bulk Payment Tests:</h3>
            <a href="http://demo.localhost:8080/financial?tab=payments&building=3&action=bulk_payment&auto_open=true" class="test-link bulk">
                ğŸ’¸ ÎœÎ±Î¶Î¹ÎºÎ® Î Î»Î·ÏÏ‰Î¼Î® ÎŒÎ»Ï‰Î½ (334,85 â‚¬)
            </a>
            <a href="http://demo.localhost:8080/financial?tab=payments&building=3&action=urgent_payment&auto_open=true" class="test-link urgent">
                âš ï¸ Î Î»Î·ÏÏ‰Î¼Î® ÎœÏŒÎ½Î¿ Î•Ï€ÎµÎ¹Î³Î¿Ï…ÏƒÏÎ½
            </a>
        </div>

        <!-- Expected Behavior Section -->
        <div class="test-section">
            <h2>âœ… Î‘Î½Î±Î¼ÎµÎ½ÏŒÎ¼ÎµÎ½Î· Î£Ï…Î¼Ï€ÎµÏÎ¹Ï†Î¿ÏÎ¬</h2>
            
            <div class="feature-list">
                <h4>ÎŒÏ„Î±Î½ ÎºÎ¬Î½ÎµÏ„Îµ ÎºÎ»Î¹Îº ÏƒÎµ ÎºÎ¿Ï…Î¼Ï€Î¯ Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚:</h4>
                <div class="feature-item">Î‘Î½Î±ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ· ÏƒÏ„Î· ÏƒÎµÎ»Î¯Î´Î± <code>/financial?tab=payments</code></div>
                <div class="feature-item">Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î¿ Î¬Î½Î¿Î¹Î³Î¼Î± Ï„Î¿Ï… modal "ÎÎ­Î± Î•Î¯ÏƒÏ€ÏÎ±Î¾Î·"</div>
                <div class="feature-item">Î ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î·ÏÏ‰Î¼Î­Î½Î¿ Ï€ÎµÎ´Î¯Î¿ "Î”Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±" Î¼Îµ Ï„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±</div>
                <div class="feature-item">Î ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î·ÏÏ‰Î¼Î­Î½Î¿ Ï€Î¿ÏƒÏŒ Î²Î¬ÏƒÎµÎ¹ Ï„Î·Ï‚ Î¿Ï†ÎµÎ¹Î»Î®Ï‚</div>
                <div class="feature-item">Î ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î·ÏÏ‰Î¼Î­Î½Î¿ ÏŒÎ½Î¿Î¼Î± Ï€Î»Î·ÏÏ‰Ï„Î® (Î¹Î´Î¹Î¿ÎºÏ„Î®Ï„Î·Ï‚/ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î®Ï‚)</div>
                <div class="feature-item">Î ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î·ÏÏ‰Î¼Î­Î½Î· Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î® Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚</div>
            </div>
        </div>

        <!-- URL Structure Section -->
        <div class="test-section">
            <h2>ğŸ”— Î”Î¿Î¼Î® URL Parameters</h2>
            
            <h3>Î’Î±ÏƒÎ¹ÎºÎ¬ Parameters:</h3>
            <ul>
                <li><code>tab=payments</code> - Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ tab Ï€Î»Î·ÏÏ‰Î¼ÏÎ½</li>
                <li><code>building=3</code> - ID ÎºÏ„Î¹ÏÎ¯Î¿Ï… (Î‘ÏÎ±Ï‡ÏÎ²Î·Ï‚ 12)</li>
                <li><code>action=new_payment</code> - Î¤ÏÏ€Î¿Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î±Ï‚</li>
                <li><code>apartment=%CE%912</code> - Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚ (URL encoded)</li>
                <li><code>auto_open=true</code> - Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î¿ Î¬Î½Î¿Î¹Î³Î¼Î± modal</li>
            </ul>

            <h3>Î Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î± URL:</h3>
            
            <div class="url-example">
                # ÎšÎ±Î½Î¿Î½Î¹ÎºÎ® Ï€Î»Î·ÏÏ‰Î¼Î® Î¼Îµ Ï€ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î·ÏÏ‰Î¼Î­Î½Î¿ Î´Î¹Î±Î¼Î­ÏÎ¹ÏƒÎ¼Î±
                http://demo.localhost:8080/financial?tab=payments&building=3&action=new_payment&apartment=Î‘2&auto_open=true
            </div>
            
            <div class="url-example">
                # Î†Î¼ÎµÏƒÎ· Ï€Î»Î·ÏÏ‰Î¼Î® (quick payment)
                http://demo.localhost:8080/financial?tab=payments&building=3&action=quick_payment&apartment=Î“1&auto_open=true
            </div>
            
            <div class="url-example">
                # ÎœÎ±Î¶Î¹ÎºÎ® Ï€Î»Î·ÏÏ‰Î¼Î®
                http://demo.localhost:8080/financial?tab=payments&building=3&action=bulk_payment&auto_open=true
            </div>
        </div>

        <!-- localStorage Data Section -->
        <div class="test-section">
            <h2>ğŸ’¾ localStorage Data Structure</h2>
            
            <p>Î¤Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï€ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎ·Ï‚ Î±Ï€Î¿Î¸Î·ÎºÎµÏÎ¿Î½Ï„Î±Î¹ ÏƒÏ„Î¿ localStorage ÎºÎ±Î¹ Î´Î¹Î±Î²Î¬Î¶Î¿Î½Ï„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿ PaymentForm:</p>
            
            <h3>Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± prefilled_payment:</h3>
            <div class="url-example">
{
  "apartment_number": "Î‘2",
  "owner_name": "Î•Î»Î­Î½Î· Î”Î·Î¼Î·Ï„ÏÎ¯Î¿Ï…",
  "amount": 45.50,
  "debt_balance": 45.50,
  "building_id": 3,
  "payment_type": "debt_settlement",
  "description": "Î•Î¾ÏŒÏ†Î»Î·ÏƒÎ· Î¿Ï†ÎµÎ¹Î»Î®Ï‚ Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚ Î‘2"
}
            </div>
            
            <h3>Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± quick_payment:</h3>
            <div class="url-example">
{
  "apartment_number": "Î“1",
  "owner_name": "Î£Î¿Ï†Î¯Î± ÎÎ¹ÎºÎ¿Î»Î¬Î¿Ï…",
  "amount": 120.80,
  "debt_balance": 120.80,
  "building_id": 3,
  "payment_type": "debt_settlement",
  "quick_payment": true,
  "urgency_level": "Î£Î¿Î²Î±ÏÎ®",
  "description": "Î†Î¼ÎµÏƒÎ· ÎµÎ¾ÏŒÏ†Î»Î·ÏƒÎ· Î¿Ï†ÎµÎ¹Î»Î®Ï‚ Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚ Î“1"
}
            </div>
        </div>

        <!-- Next Steps Section -->
        <div class="test-section">
            <h2>ğŸš€ Î•Ï€ÏŒÎ¼ÎµÎ½Î± Î’Î®Î¼Î±Ï„Î±</h2>
            
            <div class="feature-list">
                <h4>ÎœÎµÏ„Î¬ Ï„Î·Î½ ÎµÏ€Î¹Ï„Ï…Ï‡Î® Î´Î¿ÎºÎ¹Î¼Î®:</h4>
                <div class="feature-item">Î•Î½ÏƒÏ‰Î¼Î¬Ï„Ï‰ÏƒÎ· ÏƒÏ„Î¿ Ï€Î±ÏÎ±Î³Ï‰Î³Î¹ÎºÏŒ ÏƒÏÏƒÏ„Î·Î¼Î±</div>
                <div class="feature-item">Î”Î¿ÎºÎ¹Î¼Î® Î¼Îµ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î±</div>
                <div class="feature-item">User training ÎºÎ±Î¹ documentation</div>
                <div class="feature-item">Monitor Î³Î¹Î± performance ÎºÎ±Î¹ usability</div>
            </div>
        </div>

        <!-- Debug Info -->
        <div class="test-section">
            <h2>ğŸ”§ Debug Information</h2>
            <p>Î“Î¹Î± debug, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎµÎ»Î­Î³Î¾ÎµÏ„Îµ:</p>
            <ul>
                <li>Browser Developer Tools â†’ Console Î³Î¹Î± error messages</li>
                <li>Network tab Î³Î¹Î± API calls</li>
                <li>Application â†’ Local Storage Î³Î¹Î± stored data</li>
                <li>URL parameters ÏƒÏ„Î¿ address bar</li>
            </ul>
            
            <div class="feature-list">
                <h4>âœ… Fixed Issues:</h4>
                <div class="feature-item">Î”Î¹Î¿ÏÎ¸ÏÎ¸Î·ÎºÎµ Ï„Î¿ "paymentModal.open is not a function" error</div>
                <div class="feature-item">Î¤ÏÏÎ± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î· ÏƒÏ‰ÏƒÏ„Î® function: paymentModal.openModal()</div>
                <div class="feature-item">Î ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ debug logging Î³Î¹Î± auto-open actions</div>
                <div class="feature-item">Î”Î¹Î¿ÏÎ¸ÏÎ¸Î·ÎºÎµ Ï„Î¿ infinite loop Î¼Îµ hasAutoOpenedModal state</div>
                <div class="feature-item">Î ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ Î­Î»ÎµÎ³Ï‡Î¿Ï‚ Î³Î¹Î± Ï„Î¿ modalParam ÏƒÏ„Î¿ URL</div>
            </div>
        </div>
    </div>

    <script>
        // Add some debug logging
        console.log('Payment Flow Test Page Loaded');
        console.log('Building ID: 3 (Î‘ÏÎ±Ï‡ÏÎ²Î·Ï‚ 12)');
        console.log('Available Apartments: Î‘2, Î’1, Î“1, Î”1');
        console.log('Test URLs generated for demo.localhost:8080');
        
        // Log current localStorage state
        console.log('Current localStorage data:');
        ['prefilled_payment', 'quick_payment', 'bulk_payment', 'urgent_payment'].forEach(key => {
            const data = localStorage.getItem(key);
            if (data) {
                console.log(`${key}:`, JSON.parse(data));
            }
        });
    </script>
</body>
</html>
