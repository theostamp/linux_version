# Environment Variables Schema
# This file documents all required and optional environment variables for the project

# ============================================================================
# BACKEND ENVIRONMENT VARIABLES (Railway/Django)
# ============================================================================

# Django Core Settings
DJANGO_SECRET_KEY=your-secret-key-here  # REQUIRED: Django secret key
DJANGO_DEBUG=False  # Set to True for development
DJANGO_ENV=production  # Options: development, production
ENV=production  # Alias for DJANGO_ENV

# Django Security Settings (REQUIRED in production)
DJANGO_ALLOWED_HOSTS=yourdomain.com,api.yourdomain.com,*.railway.app  # REQUIRED: Comma-separated list of allowed hosts
CSRF_TRUSTED_ORIGINS=https://yourdomain.com,https://*.vercel.app  # REQUIRED: Comma-separated list of trusted origins
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://*.vercel.app  # REQUIRED: Comma-separated list of CORS origins

# Railway Configuration
RAILWAY_PUBLIC_DOMAIN=your-app.up.railway.app  # Railway public domain (optional, auto-detected)
RAILWAY_ENVIRONMENT=production  # Railway environment name

# Database Configuration
DATABASE_URL=postgresql://user:password@host:port/dbname  # REQUIRED: PostgreSQL connection string
# OR use individual variables:
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=password
DB_HOST=localhost
DB_PORT=5432

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379

# Tenant Configuration
TENANT_SCHEMA_NAME=demo  # Default tenant schema name

# ============================================================================
# FRONTEND ENVIRONMENT VARIABLES (Vercel/Next.js)
# ============================================================================

# API Configuration
API_BASE_URL=https://your-backend.up.railway.app  # REQUIRED: Backend API URL (server-side only, used by proxy route)
NEXT_PUBLIC_API_URL=https://your-backend.up.railway.app  # Optional: Public API URL (exposed to client, fallback)
FRONTEND_URL=https://your-app.vercel.app  # Optional: Frontend URL (for testing and health checks)

# Stripe Configuration
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...  # REQUIRED: Stripe publishable key
STRIPE_SECRET_KEY=sk_live_...  # REQUIRED: Stripe secret key (server-side only)
STRIPE_WEBHOOK_SECRET=whsec_...  # REQUIRED: Stripe webhook secret
PER_APARTMENT_BILLING_ENABLED=false  # Optional: Enable per-apartment Stripe sync
STRIPE_WEB_PER_APARTMENT_PRICE_ID=price_web_per_apartment  # Optional: Stripe price for Web per apartment
STRIPE_PREMIUM_ADDON_PER_APARTMENT_PRICE_ID=price_premium_addon_per_apartment  # Optional: Stripe price for Premium add-on per apartment
STRIPE_IOT_ADDON_PER_APARTMENT_PRICE_ID=price_iot_addon_per_apartment  # Optional: Stripe price for IoT add-on per apartment

# App Configuration
NEXT_PUBLIC_APP_NAME=New Concierge
NEXT_PUBLIC_APP_URL=https://yourdomain.com

# Internal API Security
INTERNAL_API_SECRET_KEY=your-internal-api-secret-key  # REQUIRED: Secret key for internal API calls

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================

EMAIL_BACKEND=users.mailersend_backend.MailerSendEmailBackend
MAILERSEND_API_KEY=your-mailersend-api-key
MAILERSEND_FROM_EMAIL=noreply@yourdomain.com

# SMTP Configuration (alternative)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# ============================================================================
# VIBER CONFIGURATION
# ============================================================================

VIBER_ENABLED=false
VIBER_API_TOKEN=your-viber-bot-token
VIBER_SENDER_NAME=New Concierge
VIBER_SENDER_AVATAR=https://yourdomain.com/logo.png
VIBER_CHAT_URI=your_viber_bot_uri
VIBER_WEBHOOK_VERIFY=true
VIBER_AUTO_WITH_EMAIL=true

# ============================================================================
# WEB PUSH (VAPID)
# ============================================================================

# Public/Private VAPID keys for Web Push subscriptions
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key

# Optional subject (mailto: or https://) for VAPID claims
VAPID_SUBJECT=mailto:noreply@yourdomain.com

# ============================================================================
# GOOGLE SERVICES (Optional)
# ============================================================================

GOOGLE_CALENDAR_ENABLED=False
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CLOUD_PROJECT_ID=your-project-id
GOOGLE_CLOUD_LOCATION=us
GOOGLE_DOCUMENT_AI_PROCESSOR_ID=your-processor-id

# Google Gemini AI (for Smart Invoice Scanning)
# Get your API key from: https://makersuite.google.com/app/apikey
# Or: Google Cloud Console > APIs & Services > Credentials > Create API Key
# Required API: Generative Language API (enable in Google Cloud Console)
# Note: This is DIFFERENT from GOOGLE_MAPS_API_KEY
GOOGLE_API_KEY=your-google-gemini-api-key-here

# Optional: Override Gemini model ID (if your project/key doesn't have access to the defaults)
# Examples: gemini-2.0-flash, gemini-1.0-pro-vision-latest, gemini-pro-vision
GOOGLE_GEMINI_MODEL=

# ============================================================================
# DEVELOPMENT ONLY
# ============================================================================

# These are only used in development
CLEANUP_DATABASE=false  # Set to true to cleanup database on startup
AUTO_MAKEMIGRATIONS=false  # Set to true to auto-create migrations
CSRF_COOKIE_SAMESITE=Lax  # Cookie SameSite setting

# ============================================================================
# NOTES
# ============================================================================

# 1. Backend (Railway):
#    - Set DJANGO_ALLOWED_HOSTS, CSRF_TRUSTED_ORIGINS, CORS_ALLOWED_ORIGINS
#    - Set DATABASE_URL or individual DB_* variables
#    - Set DJANGO_SECRET_KEY
#    - Set STRIPE_SECRET_KEY and STRIPE_WEBHOOK_SECRET
#
# 2. Frontend (Vercel):
#    - Set API_BASE_URL (server-side only, not exposed to client)
#    - Set NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
#    - Set NEXT_PUBLIC_APP_URL
#
# 3. Preview Deployments:
#    - Vercel automatically sets NEXT_PUBLIC_VERCEL_URL
#    - Backend CORS should include *.vercel.app pattern
#    - Backend CSRF_TRUSTED_ORIGINS should include *.vercel.app pattern
